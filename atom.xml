<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[@znz blog]]></title>
  <link href="http://blog.n-z.jp/atom.xml" rel="self"/>
  <link href="http://blog.n-z.jp/"/>
  <updated>2014-06-14T12:11:20+09:00</updated>
  <id>http://blog.n-z.jp/</id>
  <author>
    <name><![CDATA[Kazuhiro NISHIYAMA]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[fluentd ã« drb ã§æ¥ç¶šã—ã¦ã¿ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-06-13-fluentd-drb.html"/>
    <updated>2014-06-13T22:41:08+09:00</updated>
    <id>http://blog.n-z.jp/blog/fluentd-drb</id>
    <content type="html"><![CDATA[<p>druby ã®å£ãŒå…¬é–‹ã•ã‚Œã¦ã„ãŸã‚‰ã€ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã§ä½•ã§ã‚‚å®Ÿè¡Œã§ãã‚‹ã¯ãšã€
ã¨ã„ã†ã“ã¨ã§ã€ã¡ã‚‡ã£ã¨è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<ul>
<li><code>ruby</code> 2.1.2</li>
<li><code>fluentd</code> 0.10.49</li>
</ul>


<h2>ç’°å¢ƒã®æº–å‚™</h2>

<p>vagrant ä¸Šã§ rbenv ã¨ ruby-build ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ ruby 2.1.2 ã§</p>

<ul>
<li><code>gem install fluentd</code></li>
<li><code>fluentd --setup /vagrant/fluent</code></li>
<li><code>fluentd -c /vagrant/fluent/fluent.conf &amp;</code></li>
</ul>


<p>ã¨èµ·å‹•ã—ã¦æº–å‚™ã—ã¦ãŠãã¾ã—ãŸã€‚</p>

<h2>å®Ÿè¡Œä¾‹</h2>

<p><code>irb</code> ã‚’èµ·å‹•ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ <code>fluentd</code> ã‚‚èµ·å‹•ã—ã¦ã„ã‚‹ã®ã§ã€
ç‰¹ã«é¢ç™½ã„ã“ã¨ã¯ã§ããã†ã«ãªã‹ã£ãŸã®ã§ã™ãŒã€
<code>/proc/$$/cmdline</code> ã‚’ç¢ºèªã™ã‚‹ã¨ <code>irb</code> å´ã§ã¯ãªãã€
ã¡ã‚ƒã‚“ã¨ <code>fluentd</code> å´ã§ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ãã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚</p>

<pre><code>vagrant@fluentd-vm:~$ rbenv exec irb -r irb/completion --simple-prompt
&gt;&gt; require 'drb'
=&gt; true
&gt;&gt; d = DRbObject.new_with_uri('druby://127.0.0.1:24230'); nil
=&gt; nil
&gt;&gt; d.method_missing(:send, :eval, "`id`")
=&gt; "uid=1000(vagrant) gid=1000(vagrant) groups=1000(vagrant)\n"
&gt;&gt; d.method_missing(:send, :eval, '`cat /proc/$PPID/cmdline`')
=&gt; "/opt/rbenv/versions/2.1.2/bin/ruby\x00/opt/rbenv/versions/2.1.2/bin/fluentd\x00-c\x00/vagrant/fluent/fluent.conf\x00"
</code></pre>

<h2>é›‘æ„Ÿ</h2>

<p><code>root</code> æ¨©é™ã§èµ·å‹•ã—ã¦ã„ã‚‹ãªã‚‰ <code>debug_agent</code> ã¯æœ‰åŠ¹ã«ã—ãªã„æ–¹ãŒè‰¯ã•ãã†ã ã—ã€
ãƒ­ãƒ¼ã‚«ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ <code>fluentd</code> ã®å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã‚’ä½¿ãˆã‚‹ã¨ã¾ãšã„å ´åˆã‚‚æœ‰åŠ¹ã«ã—ãªã„æ–¹ãŒè‰¯ã•ãã†ã ã¨æ€ã„ã¾ã—ãŸã€‚</p>

<p>ã¾ãŸã€çŸ¥ã£ã¦ã„ã‚‹äººã«ã¯å½“ãŸã‚Šå‰ã®ã“ã¨ã§ã™ãŒã€
<code>drb</code> ã¯å¤–éƒ¨ã«å®‰å…¨ã«å…¬é–‹ã§ãã‚‹ã‚‚ã®ã§ã¯ãªã„ã®ã§ã€
ä½¿ã†å ´åˆã‚‚ <code>localhost</code> ã ã‘å¾…ã¡å—ã‘ã‚‹ã‚ˆã†ã«åˆ¶é™ã™ã¹ãã§ã™ã€‚</p>

<p>td-agent ã¯åˆæœŸè¨­å®šã§ãã†ãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€
<code>fluentd --setup</code> ã¯ãã†ãªã£ã¦ã„ãªã„ã®ã§ã€
é©åˆ‡ã«è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ãªã‚Š firewall ã§å¡ããªã‚Šã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚</p>

<h2>td-agent 1.1.19-1 ã§ã®åˆæœŸè¨­å®š</h2>

<p><code>127.0.0.1</code> ã ã‘ã§å¾…ã¡å—ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚</p>

<pre><code>## live debugging agent
&lt;source&gt;
  type debug_agent
  bind 127.0.0.1
  port 24230
&lt;/source&gt;
</code></pre>

<h2><code>fluentd --setup</code> ã§ç”Ÿæˆã•ã‚Œã‚‹è¨­å®š</h2>

<p>å¤–ã‹ã‚‰ã‚‚å—ã‘ã¤ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚</p>

<pre><code># Listen DRb for debug
&lt;source&gt;
  type debug_agent
  port 24230
&lt;/source&gt;
</code></pre>

<h2>å‚è€ƒ</h2>

<ul>
<li><a href="http://docs.ruby-lang.org/ja/2.1.0/library/drb.html">ã‚‹ã‚Šã¾ ã® DRb</a> ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</li>
<li><a href="http://docs.ruby-lang.org/en/2.1.0/DRb.html#module-DRb-label-Security">RDoc ã® DRb ã® Security ã®èª¬æ˜</a> (è‹±èª)</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ci_reporter ã‹ã‚‰ rspec_junit_formatter ã«ç§»è¡Œã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-06-13-ci-reporter-to-rspec-junit-formatter.html"/>
    <updated>2014-06-13T22:33:12+09:00</updated>
    <id>http://blog.n-z.jp/blog/ci-reporter-to-rspec-junit-formatter</id>
    <content type="html"><![CDATA[<p>rspec 2 ã‹ã‚‰ rpsec 3 ã¸ã®ç§»è¡Œã§ <code>ci_reporter</code> ãŒã†ã¾ãå‹•ã‹ãªããªã£ã¦å›°ã£ã¦ã„ãŸã‚‰ã€
<code>rspec_junit_formatter</code> ã¨ã„ã†ã®ã‚’<a href="https://twitter.com/joker1007/status/477372843601055744">æ•™ãˆã¦ã‚‚ã‚‰ã£ãŸ</a>ã®ã§ã€
ç§»è¡Œã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<ul>
<li><code>ruby</code> 2.1.2</li>
<li><code>rails</code> 3.2.18</li>
<li><code>rspec-rails</code> 3.0.1</li>
<li><code>rspec_junit_formatter</code> 0.2.0</li>
</ul>


<h2>Gemfile ã®å¤‰æ›´</h2>

<p><code>group :test</code> ã® <code>gem 'ci_reporter', require: false</code> ã‚’ <code>gem 'rspec_junit_formatter'</code> ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚</p>

<h2>jenkins ã§å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å¤‰æ›´</h2>

<p><code>bundle exec rake -f $(bundle show ci_reporter)/stub.rake ci:setup:rspec default SPEC_OPTS=--no-drb COVERAGE=on</code>
ã®ã‚ˆã†ã«å®Ÿè¡Œã—ã¦ã„ãŸã®ã‚’</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rm -rf spec/reports
</span><span class='line'>cat &gt;.rspec &lt;&lt;EOF
</span><span class='line'>--format RspecJunitFormatter
</span><span class='line'>--out spec/reports/rspec.xml
</span><span class='line'>EOF
</span><span class='line'>bundle exec rake COVERAGE=on</span></code></pre></td></tr></table></div></figure>


<p>ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
<code>spec/reports</code> ã¯è‡ªå‹•ã§ä½œæˆã—ã¦ãã‚Œã‚‹ã‚ˆã†ã§ã€äº‹å‰ã«ä½œæˆã—ã¦ãŠãå¿…è¦ã¯ãªã„ã‚ˆã†ã§ã™ã€‚
<code>ci_reporter</code> ã¯ã‚¿ã‚¹ã‚¯ã®æœ€åˆã®æ–¹ã§ <code>spec/reports</code> ã‚’å‰Šé™¤ã—ã¦ã„ãŸã®ã§ã€åŒæ§˜ã«å‰Šé™¤ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p>

<p><code>COVERAGE=on</code> ã¯ <code>simplecov</code>, <code>simplecov-rcov</code> ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°ã¨ã—ã¦ä½¿ã£ã¦ã„ã‚‹ã®ã§ä»Šå›ã®ç§»è¡Œã¨ã¯ç„¡é–¢ä¿‚ã§ã™ã€‚</p>

<p><a href="https://github.com/sj26/rspec_junit_formatter">RSpec JUnit Formatter ã® README</a> ã«æ›¸ã„ã¦ã‚ã‚‹
<code>rspec --format RspecJunitFormatter --out rspec.xml</code>
ã¨ã„ã†å®Ÿè¡Œæ–¹æ³•ã ã¨ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–é–¢é€£ã§å•é¡ŒãŒãŠããŸã®ã§ã€
<code>rspec</code> ã‚³ãƒãƒ³ãƒ‰ç›´æ¥ã§ã¯ãªã <code>rake</code> ã‚³ãƒãƒ³ãƒ‰ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¿ã‚¹ã‚¯ã§å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã€
<code>.rspec</code> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚
<code>SPEC_OPTS</code> ã§æŒ‡å®šã™ã‚‹æ–¹æ³•ã§ã‚‚è‰¯ã‹ã£ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<h2>Jenkins ã®è¨­å®š</h2>

<p><code>ci_reporter</code> ã®è¨­å®šã®ã¨ãã«
<code>ãƒ“ãƒ«ãƒ‰å¾Œã®å‡¦ç†</code> ã§ <code>JUnitãƒ†ã‚¹ãƒˆçµæœã®é›†è¨ˆ</code> ã‚’è¿½åŠ ã—ã¦ã„ã¦ã€
<code>ãƒ†ã‚¹ãƒˆçµæœXML</code> ã¯ <code>spec/reports/**/*.xml</code> ã¨ã„ã†è¨­å®šã«ã—ã¦ã„ã¦ã€
<code>RspecJunitFormatter</code> ã®å‡ºåŠ›å…ˆã®æ–¹ã‚’ãã¡ã‚‰ã«ã‚ã‚ã›ãŸã®ã§ã€
Jenkins å´ã®è¨­å®šã¯å¤‰æ›´ã—ã¦ã„ã¾ã›ã‚“ã€‚</p>

<h2>ãƒ†ã‚¹ãƒˆçµæœ</h2>

<p>Jenkins ã®ãƒ†ã‚¹ãƒˆçµæœã®è¡¨ç¤ºã§ã¯ <code>spec.controllers</code> ã‚„ <code>spec.models</code> ãªã©ãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚</p>

<p><code>spec/support/*.rb</code> ã§ <code>shared_examples</code> ã‚’å®šç¾©ã—ã¦ã„ãŸã‚‰ã€
<code>spec.support</code> ãŒãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã®ãŒæ°—ã«ãªã‚Šã¾ã—ãŸãŒã€
<code>ci_reporter</code> ã®ã¨ãã¯ã»ã¼ã™ã¹ã¦ãŒ <code>(root)</code> ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ãªã£ã¦ã„ãŸã®ã«æ¯”ã¹ã‚‹ã¨
ä¾¿åˆ©ã«ãªã£ãŸã‚ˆã†ã«æ€ã„ã¾ã™ã€‚</p>

<h2><code>RSpec::Core::DeprecationError</code></h2>

<p><code>RSpec.configure do |config|</code> ã§ <code>config.raise_errors_for_deprecations!</code> ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã¨</p>

<pre><code>.../gems/rspec-core-3.0.1/lib/rspec/core/formatters/deprecation_formatter.rb:186:in `puts': Treating `metadata[:execution_result]` as a hash is deprecated. Use the attributes methods to access the data instead. Called from .../rspec_junit_formatter-0.2.0/lib/rspec_junit_formatter/rspec3.rb:43:in `result_of'. (RSpec::Core::DeprecationError)`
</code></pre>

<p>ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã®ã§ã€
<code>config.raise_errors_for_deprecations!</code>
ã‚’å¤–ã—ã¾ã—ãŸã€‚</p>

<p><a href="https://github.com/sj26/rspec_junit_formatter/commit/96f0115f7dabbea623f04b60dc23519683f39cfa">github ã® master ã§ã¯ç›´ã£ã¦ã„ã‚‹</a>ã®ã§ã€æ¬¡ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã‚‰è§£æ±ºã—ãã†ã§ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Debian squeeze (6.0) LTS ã®ä½¿ã„æ–¹]]></title>
    <link href="http://blog.n-z.jp/blog/2014-06-06-squeeze-lts.html"/>
    <updated>2014-06-06T14:07:35+09:00</updated>
    <id>http://blog.n-z.jp/blog/squeeze-lts</id>
    <content type="html"><![CDATA[<p>OpenSSL ã®è„†å¼±æ€§
(<a href="http://ccsinjection.lepidum.co.jp/ja.html">CCS Injection</a>,<a href="https://security-tracker.debian.org/tracker/CVE-2014-0224">CVE-2014-0224</a>)
ã®ä¿®æ­£ãŒ
<a href="https://lists.debian.org/debian-lts-announce/2014/06/msg00002.html">squeeze ã® LTS ã«å…¥ã£ãŸã¨ã„ã†ã‚¢ãƒŠã‚¦ãƒ³ã‚¹</a>
ãŒã‚ã£ãŸã®ã«ã€
ä»Šã¾ã§é€šã‚Šä½¿ã£ã¦ã„ã‚‹ squeeze ã«ã¯ä¿®æ­£ãŒå…¥ã‚‰ãªã„ã¨æ€ã£ã¦èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ã€
<a href="https://wiki.debian.org/LTS/Using#Add_squeeze-lts_to_your_sources.list">apt-line ã®è¿½åŠ </a>
ãŒå¿…è¦ã§ã—ãŸã€‚</p>

<!--more-->


<h2>è¿½åŠ ã™ã‚‹ apt-line</h2>

<p>æ—¢å­˜ã® <code>/etc/apt/sources.list</code> ã«</p>

<pre><code>deb http://ftp.jp.debian.org/debian squeeze main non-free contrib
deb-src http://ftp.jp.debian.org/debian squeeze main non-free contrib

deb http://security.debian.org/ squeeze/updates main contrib non-free
deb-src http://security.debian.org/ squeeze/updates main contrib non-free

# squeeze-updates, previously known as 'volatile'
deb http://ftp.jp.debian.org/debian squeeze-updates main contrib non-free
deb-src http://ftp.jp.debian.org/debian squeeze-updates main contrib non-free
</code></pre>

<p>ã¨ã„ã† apt-line ã‚’è¨­å®šã—ãŸã¨ã™ã‚‹ã¨ã€</p>

<pre><code>deb http://ftp.jp.debian.org/debian squeeze-lts main non-free contrib
deb-src http://ftp.jp.debian.org/debian squeeze-lts main non-free contrib
</code></pre>

<p>ã‚’ <strong>è¿½åŠ </strong> ã—ã¾ã™ã€‚</p>

<p>ãƒã‚¿å…ƒã® Debian Wiki ã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«é©åˆ‡ã«ä½¿ã†ã«ã¯ squeeze ã¨ squeeze security ã® apt-line ã‚‚æ®‹ã—ãŸä¸Šã§ squeeze lts ã® apt-line ã‚’ <strong>è¿½åŠ </strong> ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>

<h2>apt pinning ã‚’ä½¿ã£ã¦ã„ã‚‹æ™‚ã®æ³¨æ„ç‚¹</h2>

<p><code>/etc/apt/apt.conf</code> ã§</p>

<pre><code>APT::Default-Release "squeeze";
</code></pre>

<p>ã®ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã‚‹å ´åˆã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã‹</p>

<pre><code>APT::Default-Release "squeeze-lts";
</code></pre>

<p>ã«æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>

<h2>æ›´æ–°ã®åæ˜ </h2>

<p>ã„ã¤ã‚‚é€šã‚Š <code>apt-get update</code> ã¨ <code>apt-get upgrade</code> ã§æ›´æ–°ã§ãã¾ã™ã€‚</p>

<h2>ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’èª¿ã¹ã‚‹</h2>

<p><code>squeeze-lts</code> ã® apt-line ã‚’è¿½åŠ ã™ã‚‹ã¨ <code>debian-security-support</code> ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<p><code>debian-security-support</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­ã«ã‚µãƒãƒ¼ãƒˆå¯¾è±¡å¤–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¤ã„ã¦ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã¯ <code>check-support-status</code> ã§åŒã˜å†…å®¹ãŒè¡¨ç¤ºã§ãã¾ã™ã€‚</p>

<p>Ubuntu ã«ã¯ <code>ubuntu-support-status</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒã‚ã‚‹ã®ã§ã€ä¼¼ãŸã‚ˆã†ãªã‚‚ã®ãŒ Debian ã«ã‚‚ã§ããŸã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ã€‚
<code>debian-security-support</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»Šã®ã¨ã“ã‚ <code>sid</code> ã¨ <code>squeeze-lts</code> ã«ã ã‘ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚</p>

<h2>aptitude æ¤œç´¢ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ LTS ã«åéŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§</h2>

<p><code>aptitude search '~A squeeze-lts'</code> ã§ <code>squeeze-lts</code> ã«åéŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸€è¦§ãŒèª¿ã¹ã‚‰ã‚Œã¾ã™ã€‚</p>

<p>ä»Šã®ã¨ã“ã‚ã€</p>

<ul>
<li><code>chkrootkit</code></li>
<li><code>debian-security-support</code></li>
<li><code>gnutls</code> é–¢ä¿‚</li>
<li><code>hello</code></li>
<li><code>openssl</code> é–¢ä¿‚</li>
</ul>


<p>ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vagrant ã® Multi VM é–“ã§ IPsec ã‚’è©¦ã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-06-04-vagrant-multivm-ipsec-demo.html"/>
    <updated>2014-06-04T22:00:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/vagrant-multivm-ipsec-demo</id>
    <content type="html"><![CDATA[<p>æ­£å¸¸ã« IPsec ã®æš—å·åŒ–é€šä¿¡ãŒã§ãã¦ã„ã‚‹ã¨ãã® racoon ã®ãƒ­ã‚°ãªã©ã‚’ç¢ºèªã—ãŸã‹ã£ãŸã®ã§ã€
Vagrant ã¨ ansible ã§
IPsec ã§é€šä¿¡ã§ãã‚‹ Multi VM ç’°å¢ƒã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚</p>

<p>playbook ã¯
<a href="https://github.com/znz/ansible-playbook-ipsec-demo">https://github.com/znz/ansible-playbook-ipsec-demo</a>
ã§å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚</p>

<!--more-->


<h2>å‹•ä½œç¢ºèªãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<ul>
<li>ãƒ›ã‚¹ãƒˆ OS : Mac OS X 10.9.3</li>
<li>VirtualBox 4.3.12</li>
<li>Vagrant 1.6.3</li>
<li>ansible 1.6.2</li>
<li>ã‚²ã‚¹ãƒˆ OS : Ubuntu 14.04 &times; 2</li>
</ul>


<p>Ubuntu ã¯ <a href="https://cloud-images.ubuntu.com/vagrant/trusty/current/">https://cloud-images.ubuntu.com/vagrant/trusty/current/</a> ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ã£ãŸã®ã§ã€
daily build ã®çŠ¶æ…‹ã«ã‚ˆã£ã¦ã¯å‹•ä½œãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<h2>ãƒ›ã‚¹ãƒˆã‚ªãƒ³ãƒªãƒ¼ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯</h2>

<p>ä½¿ã£ãŸå¾Œã¯</p>

<ul>
<li>vboxnet1 (192.168.50.1/24)</li>
<li>vboxnet2 (192.168.11.1/24)</li>
<li>vboxnet3 (192.168.12.1/24)</li>
</ul>


<p>ãŒå‹æ‰‹ã«å¢—ãˆã¦ã„ã‚‹ã®ã§ã€ä¸è¦ãªã‚‰è¨­å®šã§æ¶ˆã—ã¦ãŠãã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã« 192.168.50.0/24 ã®éƒ¨åˆ†ã§ IPsec æ¥ç¶šã‚’ã—ã¦ã€
192.168.11.11 ã¨ 192.168.12.12 ã‚’ã¤ãªãã€ã¨ã„ã†æ„Ÿã˜ã«ã—ã¦ã„ã¾ã™ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® eth0 ã¯å¤–éƒ¨ã¸ã®æ¥ç¶šç”¨ã¨ã—ã¦ãã®ã¾ã¾ã«ã—ã¦ã„ã¾ã™ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>192.168.11.11 (vm1:eth2)
</span><span class='line'>       |
</span><span class='line'>192.168.50.11 (vm1:eth1)
</span><span class='line'>       |
</span><span class='line'>192.168.50.12 (vm2:eth1)
</span><span class='line'>       |
</span><span class='line'>192.168.12.12 (vm2:eth2)</span></code></pre></td></tr></table></div></figure>


<h2>æº–å‚™</h2>

<p>Usage ã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«æº–å‚™ã‚’ã—ã¦ãŠãã¾ã™ã€‚
å…ˆæ—¥ä½œã£ãŸ <code>ja_jp</code> role ã¯ git submodule ã«ã—ã¦ã„ã‚‹ã®ã§ã€</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% git submodule init
</span><span class='line'>% git submodule update</span></code></pre></td></tr></table></div></figure>


<p>ã§å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>

<h2>è©¦ã—æ–¹</h2>

<p><code>vagrant up</code>
ã™ã‚‹ã¨
<code>/etc/ipsec-tools.conf</code>
ã¨
<code>/etc/racoon/racoon.conf</code>
ã«è¨­å®šãŒå…¥ã£ã¦ã„ã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€
å§‹ç‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã—ã¦
<code>ipsec-tools.conf</code>
ã«è¨­å®šã—ãŸçµŒè·¯ã‚’é€šã‚‹ã‚ˆã†ã«ãƒ‘ã‚±ãƒƒãƒˆã‚’é€ã‚‹ã¨
IPsec VPN ãŒã¤ãªãŒã‚Šã¾ã™ã€‚</p>

<p><code>ping</code> ã‚³ãƒãƒ³ãƒ‰ã®ã‚ˆã†ã«ç›´æ¥å§‹ç‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒãªã„å ´åˆã¯
<code>ping -I eth2 192.168.12.12</code> ã®ã‚ˆã†ã« network interface ã§æŒ‡å®šã™ã‚Œã°
è‰¯ã„ã‚ˆã†ã§ã™ã€‚</p>

<h2>å‹•ä½œç¢ºèª</h2>

<p>ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ãŒæ¥ç¶šå‰å¾Œã§å¤‰ã‚ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p>

<ul>
<li><code>racoonctl -l show-sa isakmp</code></li>
<li><code>racoonctl -l show-sa ipsec</code></li>
<li><code>setkey -D</code></li>
</ul>


<p>racoon ã®ãƒ­ã‚°ãŒ <code>/var/log/syslog</code> ã«å¤§é‡ã«å‡ºã¦ã„ã‚‹ã®ã‚’ç¢ºèªã§ãã¾ã™ã€‚
(<code>racoon.conf</code> ã§ <code>log debug</code> ã«ã—ã¦ã„ã‚‹ãŸã‚)</p>

<h2>tshark ã§ãƒ‘ã‚±ãƒƒãƒˆã®ç¢ºèª</h2>

<p><code>tshark</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå¾Œã€
<code>sudo dpkg-reconfigure wireshark-common</code>
ã§ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚‚å®Ÿè¡Œã‚’è¨±å¯ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã€
å®Ÿè¡Œã‚’è¨±å¯ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ <code>wireshark</code> ã«è¿½åŠ ã—ã¾ã™ã€‚</p>

<p>ã‚°ãƒ«ãƒ¼ãƒ—ã®è¿½åŠ ã‚’åæ˜ ã™ã‚‹ãŸã‚ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ç›´ã™ã¨ã€
<code>tshark -i eth1 -V 'port 500'</code>
ãªã©ã§ãƒ‘ã‚±ãƒƒãƒˆã®ç¢ºèªãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>

<p>æš—å·åŒ–ã•ã‚Œã¦ã„ã¦è©³ç´°ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€
UDP ã® 500 ç•ªãƒãƒ¼ãƒˆã§ Informational ã®ãƒ‘ã‚±ãƒƒãƒˆãŒæµã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚</p>

<p>GUI ã® wireshark ã®æ–¹ã§ã¯
<a href="http://ask.wireshark.org/questions/12019/how-can-i-decrypt-ikev1-andor-esp-packets">http://ask.wireshark.org/questions/12019/how-can-i-decrypt-ikev1-andor-esp-packets</a>
ã®æ–¹æ³•ã§æš—å·åŒ–ã®è§£é™¤ã‚‚ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚</p>

<p>syslog ã®æ–¹ã§ racoon ã®ãƒ­ã‚°ã‚’ã¿ã‚‹ã¨ã€
DPD ã®ãƒ‘ã‚±ãƒƒãƒˆã‚‰ã—ã„ã¨ã„ã†ã“ã¨ãŒç¢ºèªã§ãã¾ã—ãŸã€‚
syslog ã®æ–¹ã§ <code>#012</code> ã¨ãªã£ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ãŒã€
ã“ã‚Œã¯ rsyslog ã§æ”¹è¡ŒãŒå¤‰æ›ã•ã‚ŒãŸãŸã‚‚ã®ã§ç©ºç™½ã¨ã—ã¦ç„¡è¦–ã™ã‚Œã°è‰¯ãã¦ã€
ä¾‹ãˆã°</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Jun  4 17:54:43 vm1 racoon: DEBUG: new cookie:#012831d33d46e20f8e6
</span><span class='line'>Jun  4 17:54:43 vm1 racoon: DEBUG: final encryption key computed:
</span><span class='line'>Jun  4 17:54:43 vm1 racoon: DEBUG: #012932d361f fc62ddc2 6164d513 d40d211f b7364166 232cf490</span></code></pre></td></tr></table></div></figure>


<p>ã¨ã„ã†ãƒ­ã‚°ãªã‚‰ cookie ã¯ <code>831d33d46e20f8e6</code> ã«ãªã‚Šã¾ã™ã€‚</p>

<p>éµã¯ <code>932d361ffc62ddc26164d513d40d211fb7364166232cf490</code> ã«ãªã‚‹ã¨æ€ã£ãŸã®ã§ã™ãŒã€
ã“ã‚Œã‚’
Edit &ndash;> Preferences &ndash;> Protocols &ndash;> ISAKMP &ndash;> IKEv1 Decryption Table:
ã«è¨­å®šã™ã‚Œã°è‰¯ã„ã¯ãšãªã®ã§ã™ãŒã€è©¦ã—ãŸã¨ã“ã‚ decrypt ã•ã‚Œãªã‹ã£ãŸã®ã§ã€
ã‚ã£ã¦ã„ã‚‹ã®ã‹ã©ã†ã‹ã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
cookie ã®æ–¹ã¯ä»–ã®ãƒ­ã‚°ãªã©ã§ç¢ºèªã§ããŸã®ã§ã€ã‚ã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ansible-galaxy ã‚’ä½¿ã£ã¦ã¿ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-06-02-ansible-galaxy.html"/>
    <updated>2014-06-02T22:00:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/ansible-galaxy</id>
    <content type="html"><![CDATA[<p>ansible ã®è¤‡æ•°ã® playbook ã§ role ã‚’å…±æœ‰ã™ã‚‹ã®ã«
<a href="https://galaxy.ansible.com/">Ansible Galaxy</a>
ã¯ã©ã†ã ã‚ã†ã¨æ€ã£ã¦ç™»éŒ²ã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>å‹•ä½œç¢ºèªãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<ul>
<li>ansible 1.6.2</li>
</ul>


<h2>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²</h2>

<p>å¾Œã§ github ã‹ã‚‰ role ã‚’ import ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã‚ã£ã¦ã€
github é€£æºã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¾ã—ãŸã€‚</p>

<p>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯4æ–‡å­—ä»¥ä¸Šå¿…é ˆã¨ã„ã†ã“ã¨ã§ <code>znzj</code> ã«ã—ã¾ã—ãŸã€‚
(<a href="https://index.docker.io/">docker index</a> ã¨ã‹
<a href="https://vagrantcloud.com/">Vagrant Cloud</a> ã¨ã‹
æœ€è¿‘ã¯4æ–‡å­—ä»¥ä¸Šå¿…é ˆãŒå¤šã„ã®ã§ã—ã‚‡ã†ã‹?)</p>

<h2>role ã‚’ github ã«å…¬é–‹</h2>

<p><code>ansible-galaxy init ansible-role-ja_jp</code> ã§ã²ãªå½¢ã‚’ä½œæˆã—ã¦ã€
<code>provisioning/roles/ja_jp</code> ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­èº«ã ã£ãŸã‚‚ã®ã‚’ç§»è¡Œã—ã¦
<a href="https://github.com/znz/ansible-role-ja_jp">https://github.com/znz/ansible-role-ja_jp</a> ã¨ã—ã¦å…¬é–‹ã—ã¾ã—ãŸã€‚</p>

<p>apt ã®ãƒŸãƒ©ãƒ¼ã‚µã‚¤ãƒˆã¨ã—ã¦æ—¥æœ¬ã®ãƒŸãƒ©ãƒ¼ã‚’ä½¿ã£ãŸã‚Šã€æ—¥æœ¬èª locale ã«ã—ãŸã‚Šã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ JST ã«ã—ãŸã‚Šã™ã‚‹ role ã§ã™ã€‚</p>

<h2>Ansbile Galaxy ã« role ã‚’è¿½åŠ </h2>

<p>ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸçŠ¶æ…‹ã ã¨å³ä¸Šã®æ–¹ã«å‡ºã¦ãã‚‹ <code>Add a Role</code> ã¨ã„ã†ãƒªãƒ³ã‚¯ã‹ã‚‰ç™»éŒ²ã—ã¾ã™ã€‚</p>

<ul>
<li>Github Username/Account : znz</li>
<li>Github Repository : ansible-role-ja_jp</li>
<li>Alternate Name : ja_jp</li>
</ul>


<p>ã¨ã„ã†å†…å®¹ã§ç™»éŒ²ã—ãŸã¨ã“ã‚ã€
<a href="https://galaxy.ansible.com/list#/roles/967">https://galaxy.ansible.com/list#/roles/967</a>
ã§è¦‹ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<p>URL ã‚’ã¿ã‚‹ã¨ã‚ã‹ã‚‹ã‚ˆã†ã« JavaScript ã‚ªãƒ•ã ã¨å€‹åˆ¥ã® role ã¯è¦‹ãˆã¾ã›ã‚“ã€‚
ã¡ã‚‡ã£ã¨è©¦ã—ãŸæ„Ÿã˜ã ã¨ä»£ç”¨ã® URL ã‚‚è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚</p>

<h2>å‹•ä½œç¢ºèª</h2>

<p><code>ansible-galaxy install znzj.ja_jp</code> ã ã¨ <code>/usr/local/etc/ansible/roles/znzj.ja_jp</code> ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã—ã¾ã£ãŸ (Homebrew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ ansible ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆ) ã®ã§ã€
<code>ansible-galaxy install --roles-path ./roles znzj.ja_jp</code>
ã§ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ç›´ã—ã¾ã—ãŸã€‚</p>

<h2>æ„Ÿæƒ³</h2>

<p>ã“ã‚Œã ã‘ã ã¨ git submodule ã«æ¯”ã¹ã¦åˆ©ç‚¹ãŒè¦‹ãˆã¦ã“ãªã„ã®ã§ã™ãŒã€
ä¾å­˜é–¢ä¿‚ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã‚’ã¡ã‚ƒã‚“ã¨ä½¿ãˆã‚Œã°ä¾¿åˆ©ãã†ã«æ€ã„ã¾ã—ãŸã€‚</p>

<p>è‡ªåˆ†ãŒç™»éŒ²ã—ãŸ role ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚‰ãšã€
ä»Šã®ã¨ã“ã‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã—ã®ã¾ã¾ãªã®ã§ã€ã©ã†ã«ã‹ã—ãŸã„ã§ã™ã€‚</p>

<h2>å‚è€ƒã‚µã‚¤ãƒˆ</h2>

<ul>
<li><a href="http://qiita.com/kiri/items/f329a35543022d6e45d0">AnsibleWorks Galaxyã«roleã‚’ç™»éŒ²ã—ã¦ã¿ã‚‹ &ndash; Qiita</a>

<ul>
<li>ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã¿ã‚‹ã¨ AnsibleWorks Galaxy ã«ãªã£ã¦ã„ã‚‹ã¨ã“ã‚ãŒä»Šã¯ Ansible Galaxy ãªã®ã§ã€ã„ã¤ã®é–“ã«ã‹åå‰ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚</li>
</ul>
</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¬¬ 11 å› RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka ã«å‚åŠ ã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-28-rubymotion-mokumoku-osaka.html"/>
    <updated>2014-05-28T19:38:39+09:00</updated>
    <id>http://blog.n-z.jp/blog/rubymotion-mokumoku-osaka</id>
    <content type="html"><![CDATA[<p>ç¬¬ 1 å›ã‹ã‚‰ç¬¬ 10 å›ã«ã‚‚å‚åŠ ã—ãŸ RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka ã®
<a href="http://connpass.com/event/6116/">ç¬¬ 11 å› RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka</a>
ã«å‚åŠ ã—ã¦ãã¾ã—ãŸã€‚</p>

<p>æ¬¡å›ã®
<a href="http://connpass.com/event/6666/">ç¬¬ 12 å› RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka</a>
ã¯ 06/20(é‡‘) ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<!--more-->


<h2>ãƒ¡ãƒ¢</h2>

<ul>
<li><code>gem 'ib'</code> ã¨ Auto Layout</li>
<li><a href="http://kojisatoapp.blogspot.jp/2014/03/admobnendiadadmob.html">ã‚¢ãƒ—ãƒªã§é£¯ã‚’é£Ÿã†: AdMobãƒ¡ãƒ‡ã‚£ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã§åºƒå‘Š(Nend,iAd,AdMob)ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹æ–¹æ³•</a></li>
<li><code>usingSpringWithDamping</code></li>
<li><a href="http://vagrantmanager.com/">Vagrant Manager</a></li>
<li><a href="http://stackoverflow.com/questions/13216092/how-to-sort-a-hash-by-value-in-descending-order-and-output-a-hash-in-ruby">Hash ã®ã‚½ãƒ¼ãƒˆ</a></li>
<li><a href="http://urltrapper.n-z.jp/">URLTrapper</a> v0.1</li>
<li><a href="https://itunes.apple.com/jp/app/kokowo-songru/id473519853?mt=8">ã“ã“ã‚’é€ã‚‹</a></li>
<li><a href="http://shin1x1.github.io/vagrantx/">VagrantX</a> v0.2.0</li>
<li><a href="http://macface.github.io/">MacFace</a></li>
</ul>


<h2>URLTrapper å…¬é–‹</h2>

<p>ä»Šæ—¥ã¯ URLTrapper ã®å…¬é–‹ä½œæ¥­ã‚’ã—ã¦ã„ã¾ã—ãŸã€‚</p>

<p>æœ€çµ‚çš„ã«ã¯
<a href="http://urltrapper.n-z.jp/">URLTrapper</a>
ã®<a href="https://github.com/znz/urltrapper">ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¬é–‹</a>ã—ã¦ã€
<a href="https://github.com/znz/urltrapper/releases/tag/v0.1">v0.1 ã‚’ãƒªãƒªãƒ¼ã‚¹</a>ã—ã¾ã—ãŸã€‚</p>

<h2>Config è¨­å®š</h2>

<p>ã¾ãš
<a href="http://rubymotion.jp/RubyMotionDocumentation/guides/project-management/index.html">RubyMotion Project Management Guide</a>
ã® 2. Configuration ã‚’ã¿ã¦ identifier ãªã©ã‚’è¨­å®šã—ã¦ã„ãã¾ã—ãŸã€‚</p>

<h2>ãƒªãƒªãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ</h2>

<p><code>rake build</code> ã§ <code>build/MacOSX-10.9-Release/*.app</code> ãŒå‡ºæ¥ã‚‹ã®ã§ã€
ãã‚Œã‚’ Finder ã§ zip ã«ã—ã¦ã€
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä»˜ãã®ãƒ•ã‚¡ã‚¤ãƒ«åã«ã—ã¾ã—ãŸã€‚</p>

<h2>ãƒªãƒªãƒ¼ã‚¹</h2>

<p>github ã® Release ã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ã€
å…ˆã»ã©ã® zip ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸã€‚</p>

<p>é€”ä¸­ã€ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆã«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚
ã“ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã¯å¾Œã§ GitHub Pages ã‚’ä½œã‚‹æ™‚ã«ã‚‚ä½¿ã„ã¾ã—ãŸã€‚</p>

<h2>GitHub Pages ä½œæˆ</h2>

<p>github ã® Settings ã‹ã‚‰ GitHub Pages ã«ã‚ã‚‹ Automatic page generator ã‚’ä½¿ã£ã¦ä½œæˆã—ã¾ã—ãŸã€‚</p>

<p>è‡ªå‹•ä½œæˆã•ã‚ŒãŸã‚‚ã®ã‹ã‚‰ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®ãƒªãƒ³ã‚¯ã®ã¨ã“ã‚ã¯ VagrantX ã‚’å‚è€ƒã«ã—ã¦ã€
ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‹ã‚‰ãƒã‚¤ãƒŠãƒªã® zip ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«æ›¸ãæ›ãˆã¾ã—ãŸã€‚</p>

<h2>ãƒ‰ãƒ¡ã‚¤ãƒ³å•é¡Œ</h2>

<p><code>znz.github.io</code> ã¯ã€ã“ã® blog ç”¨ã«ä½¿ã£ã¦ã„ã¦ã€
<code>znz.github.io/urltrapper</code> ã‚’é–‹ãã¨
<code>blog.n-z.jp/urltrapper</code> ã«é£›ã°ã•ã‚Œã¦ã—ã¾ã£ã¦
å›°ã£ã¦ã—ã¾ã£ãŸã®ã§ã€
<a href="https://github.com/znz/urltrapper/blob/gh-pages/CNAME">https://github.com/znz/urltrapper/blob/gh-pages/CNAME</a>
ã¨ã—ã¦å€‹åˆ¥ã®ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ã†ã‚ˆã†ã«è¨­å®šã—ãŸã®ã§ã™ãŒã€
ã™ãã«ã¯åæ˜ ã•ã‚Œãªãã¦ã€ã—ã°ã‚‰ãæ‚©ã‚“ã§ã„ã¾ã—ãŸã€‚</p>

<p>æœ€å¾Œã®æˆæœç™ºè¡¨ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã¯åæ˜ ã•ã‚Œã¦ã„ã¦è¦‹ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[octopress ã§ ansible ã®è¨˜äº‹ã‚’æ›¸ãæ™‚ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-20-octopress-ansible.html"/>
    <updated>2014-05-20T23:25:18+09:00</updated>
    <id>http://blog.n-z.jp/blog/octopress-ansible</id>
    <content type="html"><![CDATA[<p>octopress ã§ ansible ã®è¨˜äº‹ã‚’æ›¸ãæ™‚ã«é€£ç¶šã™ã‚‹ <code>{</code> ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã«å›°ã£ãŸã®ã§ã€
å¯¾å‡¦æ–¹æ³•ã‚’èª¿ã¹ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—</h2>

<p><a href="http://stackoverflow.com/questions/15786144/how-to-escape-in-markdown-on-octopress">How to escape {{ in markdown on Octopress? &ndash; Stack Overflow</a>
ã«ã‚ã‚‹ã‚ˆã†ã«</p>

<pre><code>```ç¨®é¡ ãƒ•ã‚¡ã‚¤ãƒ«å
ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯
```
</code></pre>

<p>ã®å¤–å´ã‚’
<code>{% raw %}</code> ã¨ <code>{% endraw %}</code>
ã§ããã‚Œã°ã†ã¾ãã„ãã¾ã—ãŸã€‚</p>

<h2>æ–‡ä¸­ã® {{ ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—</h2>

<p>å…ˆã»ã©ã®ãƒªãƒ³ã‚¯ã®ã‚¢ãƒ³ã‚«ãƒ¼ã‚„ã“ã®ç¯€ã®è¦‹å‡ºã—ã®ã‚ˆã†ãªæ–‡ã®é€”ä¸­ã¯</p>

<pre><code>{{ "{{" }}
</code></pre>

<p>ã®ã‚ˆã†ã«æ›¸ã‘ã°ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã§ãã¾ã—ãŸã€‚</p>

<p>å¹…ãªã—ã‚¹ãƒšãƒ¼ã‚¹ (<code>&amp;#x200B;</code>) ã®ã‚ˆã†ãªå¹…ã®ãªã„æ–‡å­—ã‚’æŒŸã‚“ã§ã”ã¾ã‹ã™ã¨ã„ã†æ‰‹ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<h2>æ–‡ä¸­ã® <code>{%</code> ã®ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—</h2>

<p><code>{% raw %}</code> ã¨ <code>{% endraw %}</code> è‡ªä½“ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹ã®ã«</p>

<pre><code>{{ "{%" }}
</code></pre>

<p>ã‚’ä½¿ã£ã¦</p>

<pre><code>`{{ "{%" }} raw %}` ã¨ `{{ "{%" }} endraw %}`
</code></pre>

<p>ã®ã‚ˆã†ã«æ›¸ãã¾ã—ãŸã€‚</p>

<p><code>%}</code> ã¾ã§ <code>""</code> ã®ä¸­ã«å…¥ã‚Œã‚ˆã†ã¨ã—ã¦</p>

<pre><code>`{{ "{% raw %}" }}`
</code></pre>

<p>ã¨æ›¸ãã¨</p>

<pre><code>Liquid Exception: Variable '{{ "{% raw %}' was not properly terminated with regexp: /\}\}/
</code></pre>

<p>ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã†ã¾ãã„ãã¾ã›ã‚“ã§ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ansible ã§ sources.list ã‚’å¤‰æ›´ã—ãŸã¨ãã« update ã™ã‚‹]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-20-ansible-apt-update.html"/>
    <updated>2014-05-20T22:58:09+09:00</updated>
    <id>http://blog.n-z.jp/blog/ansible-apt-update</id>
    <content type="html"><![CDATA[<p>ansible ã§ sources.list ã‚’å¤‰æ›´ã—ãŸã¨ãã«ã¯
<code>apt-get update</code> ã—ã¦æ¬²ã—ã„ã®ã§ã™ãŒã€
æ¯å› update ã™ã‚‹ã®ã¯ç„¡é§„ãªã®ã§ã€
<code>cache_valid_time</code> ã‚‚ä½¿ã„ãŸã„ã¨æ€ã£ãŸã®ã§å¯¾å‡¦ã—ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>å‹•ä½œç¢ºèªãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<ul>
<li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ ansible 1.6.1</li>
<li>ã‚µãƒ¼ãƒãƒ¼å´ Ubuntu 12.04</li>
</ul>


<h2>ã‚„ã‚Šæ–¹</h2>

<p><code>register</code> ã§ <code>template</code> ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè¡Œçµæœã‚’å—ã‘ã¦ã€
<code>changed</code> ã®å ´åˆã¯å¿…ãš update ã—ã¦ã€
<code>skipped</code> ã®å ´åˆã¯ <code>cache_valid_time</code> ã§æƒ…å ±ãŒå¤ã„å ´åˆã ã‘ update ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span>tasks/apt.yaml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="nn">---</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">template</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">src=sources.list.{{ ansible_distribution }}.j2 dest=/etc/apt/sources.list owner=root group=root mode=0644</span>
</span><span class='line'>  <span class="l-Scalar-Plain">register</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">apt_sources_list</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">apt</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">update_cache=yes</span>
</span><span class='line'>  <span class="l-Scalar-Plain">when</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">apt_sources_list|changed</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">apt</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">update_cache=yes cache_valid_time=3600</span>
</span><span class='line'>  <span class="l-Scalar-Plain">when</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">apt_sources_list|skipped</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å†…å®¹</h2>

<p>gathering facts ã§è¨­å®šã•ã‚ŒãŸ <code>ansible_distribution_release</code> ã¨
<code>vars</code> ã§åˆ¥é€”è¨­å®šã—ãŸ <code>apt_ubuntu_uri</code> ã¨ <code>apt_ubuntu_components</code> ã‚’
çµ„ã¿åˆã‚ã›ã¦ apt-line ã‚’ä½œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p>

<p>Ubuntu ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸç›´å¾Œã® sources.list ã§ã¯
components ãŒåˆ¥ã®è¡Œã«ãªã£ã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã£ãŸã®ã§ã™ãŒã€
1 è¡Œã«ã¾ã¨ã‚ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span>templates/sources.list.Ubuntu.j2</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>deb {{ apt_ubuntu_uri }} {{ ansible_distribution_release }} {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span><span class='line'>deb-src {{ apt_ubuntu_uri }} {{ ansible_distribution_release }} {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span><span class='line'>deb {{ apt_ubuntu_uri }} {{ ansible_distribution_release }}-updates {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span><span class='line'>deb-src {{ apt_ubuntu_uri }} {{ ansible_distribution_release }}-updates {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span><span class='line'>#deb {{ apt_ubuntu_uri }} {{ ansible_distribution_release }}-backports {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span><span class='line'>#deb-src {{ apt_ubuntu_uri }} {{ ansible_distribution_release }}-backports {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span><span class='line'>deb http://security.ubuntu.com/ubuntu {{ ansible_distribution_release }}-security {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span><span class='line'>deb-src http://security.ubuntu.com/ubuntu {{ ansible_distribution_release }}-security {{ apt_ubuntu_components | join(&quot; &quot;) }}
</span></code></pre></td></tr></table></div></figure>


<p><code>backports</code> ã¯ä½¿ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã„ã¾ã™ãŒã€
<code>deb-src</code> ã‚‚ä½¿ã‚ãªã„ã®ãªã‚‰ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ãŠã„ã¦ã‚‚è‰¯ã•ãã†ã§ã™ã€‚</p>

<h2><code>vars</code> ã®å†…å®¹</h2>

<p>ä¾‹ã¨ã—ã¦ jaist ãƒŸãƒ©ãƒ¼ã‚’ä½¿ã†ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span>vars/main.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="nn">---</span>
</span><span class='line'><span class="l-Scalar-Plain">apt_ubuntu_uri</span><span class="p-Indicator">:</span> <span class="s">&quot;http://ftp.jaist.ac.jp/pub/Linux/ubuntu/&quot;</span>
</span><span class='line'><span class="l-Scalar-Plain">apt_ubuntu_components</span><span class="p-Indicator">:</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">main</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">restricted</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">universe</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">multiverse</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ansible ã§ ppa ã‚’è¿½åŠ ã™ã‚‹]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-20-ansible-add-ppa.html"/>
    <updated>2014-05-20T22:47:22+09:00</updated>
    <id>http://blog.n-z.jp/blog/ansible-add-ppa</id>
    <content type="html"><![CDATA[<p>ã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ Ubuntu ã ã¨
<code>add-apt-repository</code> ã‚³ãƒãƒ³ãƒ‰ãŒå…¥ã£ã¦ã„ã‚‹
<code>python-software-properties</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå…¥ã£ã¦ã„ãªãã¦
<code>ppa</code> ã®è¿½åŠ ã«å›°ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€
ansible ã‚’ä½¿ãˆã°ã‚µãƒ¼ãƒãƒ¼è‡ªä½“ã«ä½™è¨ˆãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥ã‚Œãªãã¦ã‚‚
<code>ppa</code> ã® apt è¨­å®šã‚’è¿½åŠ ã§ãã¾ã—ãŸã€‚</p>

<!--more-->


<h2>å‹•ä½œç¢ºèªãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<ul>
<li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ ansible 1.6.1</li>
<li>ã‚µãƒ¼ãƒãƒ¼å´ Ubuntu 12.04</li>
</ul>


<h2>ansible ã‚³ãƒãƒ³ãƒ‰ç›´æ¥</h2>

<p><code>apt_repository</code> ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å¼•æ•°ã® <code>repo</code> ã« <code>ppa</code> ã‚’æŒ‡å®šã™ã‚‹ã ã‘ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="go">ansible all -s -K -i ./inventory_hosts -m apt_repository -a &quot;repo=&#39;ppa:chris-lea/node.js&#39;&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>playbook.yml ã«æ›¸ã</h2>

<p><code>- apt_repository: repo='ppa:chris-lea/node.js'</code>
ã®ã‚ˆã†ã«æ›¸ãã ã‘ã§ã™ã€‚
æ™®é€šã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚Œã°ã‚µãƒ¼ãƒãƒ¼ã§ã‚‚å…¥ã£ã¦ã„ã‚‹ã¨æ€ã†ã®ã§ã™ãŒã€
<code>python-apt</code> ã«ä¾å­˜ã—ã¦ã„ã‚‹ã®ã§ã€
<code>- apt: pkg=python-apt</code>
ã‚‚æ›¸ã„ã¦ãŠãã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<p><a href="https://github.com/znz/ansible-playbook-passenger/blob/master/provisioning/roles/passenger/tasks/nodejs-ppa.yml">nodejs-ppa.yml</a>
ãŒå®Ÿéš›ã®ä½¿ç”¨ä¾‹ã§ã™ã€‚</p>

<figure class='code'><figcaption><span>nodejs-ppa.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="nn">---</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">apt</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">pkg=python-apt</span>
</span><span class='line'><span class="p-Indicator">-</span> <span class="l-Scalar-Plain">apt_repository</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">repo=&#39;ppa:chris-lea/node.js&#39;</span>
</span><span class='line'>  <span class="l-Scalar-Plain">when</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ansible_distribution_release == &quot;precise&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Debian ã®å ´åˆã‚„ ubuntu 14.04 ã®å ´åˆã¯é™¤å¤–ã—ã¦ã‚‚è‰¯ã„ã‹ã¨æ€ã£ã¦ã€
ubuntu 12.04 ã®æ™‚ã ã‘å®Ÿè¡Œã™ã‚‹ãŸã‚ã«
<code>when: ansible_distribution_release == "precise"</code>
ã§å®Ÿè¡Œã™ã‚‹ç’°å¢ƒã‚’åˆ¶é™ã—ã¦ã„ã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[brew pin ã§ãƒã‚°ã®ã‚ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¿ã‘ã‚‹ä¾‹]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-19-brew-pin.html"/>
    <updated>2014-05-19T21:35:03+09:00</updated>
    <id>http://blog.n-z.jp/blog/brew-pin</id>
    <content type="html"><![CDATA[<p><code>graphviz version 2.38.0 (20140413.2041)</code>
ã§
<a href="http://graphviz.org/mantisbt/view.php?id=2444">label ã®å…ˆé ­ã®æ—¥æœ¬èªãŒæ¶ˆãˆã‚‹</a>
ã¨ã„ã†ãƒã‚°ã«ã¯ã¾ã£ãŸã®ã§ã€
<code>brew pin</code>
ã§ä¿®æ­£ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ã¾ã§ã®é–“ã€
å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å›ºå®šã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚
(ãƒã‚°è‡ªä½“ã¯ãƒªãƒ³ã‚¯å…ˆã‚’ã¿ã‚Œã°ã‚ã‹ã‚‹ã‚ˆã†ã«ã™ãã«ä¿®æ­£ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚)</p>

<!--more-->


<h2>å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<p>ç¾åœ¨ã®æœ€æ–°ã¯</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> dot -V
</span><span class='line'><span class="go">dot - graphviz version 2.38.0 (20140413.2041)</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã§ä»¥ä¸‹ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã—ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> dot -V
</span><span class='line'><span class="go">dot - graphviz version 2.36.0 (20140111.2315)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>å¯¾è±¡ã‚³ãƒŸãƒƒãƒˆèª¿æŸ»</h2>

<p>ä»¥ä¸‹ã®ã‚ˆã†ã« 2.38.0 ã«ã‚ãŒã£ãŸã‚³ãƒŸãƒƒãƒˆã‚’æ¢ã—ã¦ã¿ã‚‹ã¨
<code>2f368f7be64a5b4a6b56b4ab85827997fa520953</code>
ã ã£ãŸã®ã§ã€ã“ã®å‰ã«æˆ»ã›ã°è‰¯ã„ã¨ã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> <span class="nb">cd</span> <span class="k">$(</span>brew --prefix<span class="k">)</span>
</span><span class='line'><span class="gp">%</span> git log -p Library/Formula/graphviz.rb
</span></code></pre></td></tr></table></div></figure>


<h2><code>brew pin</code> ã§å›ºå®š</h2>

<p>ãã—ã¦ã€ä»¥ä¸‹ã®æ‰‹é †ã§å›ºå®šã—ã¾ã—ãŸã€‚</p>

<ul>
<li><code>git checkout ã‚³ãƒŸãƒƒãƒˆ^</code> ã§ã‚³ãƒŸãƒƒãƒˆã®ç›´å‰ã«æˆ»ã™</li>
<li>å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã™ã®ã§ä¸€åº¦ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
<li>å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ç›´ã—</li>
<li><code>brew pin</code> ã§å›ºå®š</li>
<li><code>git checkout master</code> ã§ <code>/usr/local</code> (<code>brew --prefix</code>) ã®çŠ¶æ…‹ã‚’æˆ»ã™</li>
<li><code>brew upgrade</code> ã§å›ºå®šã•ã‚Œã¦ã„ã‚‹ã®ã‚’ç¢ºèª</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> <span class="nb">cd</span> <span class="k">$(</span>brew --prefix<span class="k">)</span>
</span><span class='line'><span class="gp">%</span>  git checkout 2f368f7be64a5b4a6b56b4ab85827997fa520953<span class="se">\^</span>
</span><span class='line'><span class="go">Note: checking out &#39;2f368f7be64a5b4a6b56b4ab85827997fa520953^&#39;.</span>
</span><span class='line'>
</span><span class='line'><span class="go">You are in &#39;detached HEAD&#39; state. You can look around, make experimental</span>
</span><span class='line'><span class="go">changes and commit them, and you can discard any commits you make in this</span>
</span><span class='line'><span class="go">state without impacting any branches by performing another checkout.</span>
</span><span class='line'>
</span><span class='line'><span class="go">If you want to create a new branch to retain commits you create, you may</span>
</span><span class='line'><span class="go">do so (now or later) by using -b with the checkout command again. Example:</span>
</span><span class='line'>
</span><span class='line'><span class="go">  git checkout -b new_branch_name</span>
</span><span class='line'>
</span><span class='line'><span class="go">HEAD is now at b8b3a30... glib-networking 2.40.1</span>
</span><span class='line'><span class="gp">%</span>  lv Library/Formula/graphviz.rb
</span><span class='line'><span class="gp">%</span> brew uninstall graphviz
</span><span class='line'><span class="go">Uninstalling /usr/local/Cellar/graphviz/2.38.0...</span>
</span><span class='line'><span class="gp">%</span> brew install graphviz
</span><span class='line'><span class="go">==&gt; Downloading https://downloads.sf.net/project/machomebrew/Bottles/graphviz-2.36.0_1.mav</span>
</span><span class='line'><span class="go">Already downloaded: /Library/Caches/Homebrew/graphviz-2.36.0_1.mavericks.bottle.tar.gz</span>
</span><span class='line'><span class="go">==&gt; Pouring graphviz-2.36.0_1.mavericks.bottle.tar.gz</span>
</span><span class='line'><span class="go">ğŸº  /usr/local/Cellar/graphviz/2.36.0_1: 470 files, 11M</span>
</span><span class='line'><span class="gp">%</span> brew pin graphviz
</span><span class='line'><span class="gp">%</span> git checkout master
</span><span class='line'><span class="go">Previous HEAD position was b8b3a30... glib-networking 2.40.1</span>
</span><span class='line'><span class="go">Switched to branch &#39;master&#39;</span>
</span><span class='line'><span class="gp">%</span> brew upgrade
</span><span class='line'><span class="go">==&gt; No packages to upgrade</span>
</span><span class='line'><span class="go">==&gt; Not upgrading 1 pinned package:</span>
</span><span class='line'><span class="go">graphviz 2.38.0</span>
</span></code></pre></td></tr></table></div></figure>


<h2><code>brew unpin</code></h2>

<p>ä¿®æ­£ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã€
Homebrew ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‰
<code>brew unpin graphviz</code>
ã§è§£é™¤ã™ã‚Œã°è‰¯ã•ãã†ã§ã™ã€‚</p>

<p><code>brew pin</code> ã¯
<a href="http://qiita.com/uasi/items/f06c6fe7c04b593ec6a3#comment-178ddb970a3033653648">qiita ã® Homebrew ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ä½œã£ãŸ ã®ã‚³ãƒ¡ãƒ³ãƒˆ</a>
ã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«ã€
FORMULA æŒ‡å®šãªã—ã® <code>brew upgrade</code> ã§ã®æ›´æ–°å¯¾è±¡ã«ã—ãªã„ã¨ã„ã†æ„å‘³ã®ã‚ˆã†ãªã®ã§ã€
master ã«æˆ»ã£ãŸçŠ¶æ…‹ã§ <code>unpin</code> ã—ã¦ã—ã¾ã£ã¦ã‚‚
ãã®å ´ã§ <code>pin</code> ã—ç›´ã›ã°å¤§ä¸ˆå¤«ã®ã‚ˆã†ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> dot -V
</span><span class='line'><span class="go">dot - graphviz version 2.36.0 (20140111.2315)</span>
</span><span class='line'><span class="gp">%</span> brew unpin graphviz
</span><span class='line'><span class="gp">%</span> brew pin graphviz
</span><span class='line'><span class="gp">%</span> brew upgrade
</span><span class='line'><span class="go">==&gt; No packages to upgrade</span>
</span><span class='line'><span class="go">==&gt; Not upgrading 1 pinned package:</span>
</span><span class='line'><span class="go">graphviz 2.38.0</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¿®æ­£ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸæ™‚ã« <code>brew unpin</code> ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€
<code>brew upgrade</code> ã®æ™‚ã«æ¯å›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã‚‹ã®ã§ã€æ°—ä»˜ãã‚„ã™ãã†ã§ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R ã¨ Ruby ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿è§£æå…¥é–€ã€€èª­æ›¸ä¼šã€€ç¬¬2å›ã«å‚åŠ ã—ã¾ã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-17-amagasakirb.html"/>
    <updated>2014-05-17T13:00:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/amagasakirb</id>
    <content type="html"><![CDATA[<p><a href="http://kokucheese.com/event/index/168617/">5æœˆ17æ—¥ R ã¨ Ruby ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿è§£æå…¥é–€ã€€èª­æ›¸ä¼šã€€ç¬¬2å›(å…µåº«çœŒ)</a>
ã«å‚åŠ ã—ã¾ã—ãŸã€‚
ä»Šå›ã¯4ç« ã‹ã‚‰ã§ã—ãŸã€‚
æ¬¡å›ã¯6æœˆ28æ—¥ã§ã™ã€‚</p>

<div style="float:right">
<iframe src="http://rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=znz-22&amp;o=9&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=ss_til&amp;asins=4873116155" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>
</div>




<!--more-->


<h2>ãƒ¡ãƒ¢</h2>

<p>ä»¥ä¸‹ä»Šå›ã®ãƒ¡ãƒ¢ã§ã™ã€‚</p>

<ul>
<li>PDF ã‚’ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆã§èª­ã‚€ã®ã« <code>k2pdfopt</code> ã§å¤‰æ›ã™ã‚‹ã¨èª­ã¿ã‚„ã™ã„</li>
<li>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰: <a href="https://github.com/setoyama60jp/everyday">https://github.com/setoyama60jp/everyday</a></li>
<li>p.90 l.3 <code>@durarion</code> ã£ã¦ <code>@duration</code> ã® typo?</li>
<li><code>duration</code> ã¯ä»Šä½•åˆ†å æœ‰ã—ã¦ã„ã‚‹ã‹</li>
<li><code>use_duration</code> ã¯ <code>Person</code> ãŒä½•åˆ†å æœ‰ã™ã‚‹ã‹</li>
<li><code>need_to_go?</code> ã¯å¿…ãš3å›ã¨ã„ã†ã‚ã‘ã§ã¯ãªã540åˆ†ã®3ã®ç¢ºç‡</li>
<li>p.91 <code>ã‚«ãƒ³ãƒå¥åˆ‡ã‚Š</code> &ndash;> <code>ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š</code> ?</li>
<li>Producer Consumer ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ Enumerator ã‚’ä½¿ã†ã¨ã„ã†è©±</li>
<li><code>read.table</code> ã® <code>header</code> ã¨ã‹ <code>sep</code> ã¨ã‹</li>
<li><code>ggplot2</code> ã§ã¯ <code>+</code> ãŒã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†è©±</li>
<li>Safari Books Online ã®è©±</li>
<li>å‹•ç”»ã‚‚ã‚ã‚‹ã¨ã„ã†è©±</li>
<li>è‹±èªã ã¨å­—å¹•ãŒãªã„ã¨å³ã—ã„è©±</li>
<li>è‡ªå‹•å­—å¹•ã®è©±</li>
<li>å›³4-3 ã®ä¸‹ã«æ›¸ã„ã¦ã‚ã‚‹æ¨ªè»¸ãŒ1ã‹ã‚‰å§‹ã¾ã£ã¦ã„ã‚‹ã®ã¯é–“é•ã„ã§å®Ÿéš›ã¯0ã‹ã‚‰ãªã®ã§ã€æœ€åˆã®æ–¹ä»¥å¤–ã¯ ASCII ã‚³ãƒ¼ãƒ‰ã«ä¸€è‡´</li>
<li>ãƒ¤ãƒã‚¤çµŒæ¸ˆå­¦ ã¯ã‚ªã‚¹ã‚¹ãƒ¡ã¨ã„ã†è©± <iframe src="http://rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=znz-22&amp;o=9&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=ss_til&amp;asins=4492313788" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe></li>
<li>å®Ÿè£…ä¾‹5-3 <code>Market</code> ã‚¯ãƒ©ã‚¹ã¯ã‚¯ãƒ©ã‚¹ã«ã™ã‚‹å¿…è¦æ€§ãŒãªã„æ›¸ãæ–¹ã«ãªã£ã¦ã„ã‚‹</li>
<li><code>pdf</code> ã¨ <code>dev.off</code> ã¯ p.52 ã«èª¬æ˜ãŒã‚ã‚‹</li>
<li>5ç« ã®ãƒ¢ãƒ‡ãƒ«ãŒã„ã¾ã„ã¡ã¨ã„ã†è©±</li>
<li>å®Ÿè£…ä¾‹5-10 ã®æœ€å¾Œã®ã‚¿ãƒ¼ãƒ³ã®å‡¦ç†ã£ã¦ãƒ«ãƒ¼ãƒ—ã®å¤–ã§è‰¯ã„ã®ã§ã¯ã€‚</li>
<li>å…¨ä½“çš„ã« Ruby ã‚³ãƒ¼ãƒ‰ã‚‚ã„ã¾ã„ã¡ã¨ã„ã†è©±</li>
<li><code>R</code> ã® <code>viewport</code> ã®è©±</li>
<li>å®Ÿè£…è©³ç´°ã¨å®Ÿè£…èª¬æ˜ã®å‰ã«ã©ã†ã„ã†å‡ºåŠ›ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹ã®ã‹æ¦‚è¦ãŒæ¬²ã—ã„ã¨ã„ã†è©±</li>
<li>å‰Šã‚‹ã¨ã‹æº¶ã‹ã™ã¨ã‹ã„ã†è©±</li>
<li>ã‚¨ãƒ³ãƒ­ãƒ³äº‹ä»¶ã®ãƒ¡ãƒ¼ãƒ«ãŒå…¬é–‹ã•ã‚Œã¦ã„ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã®ã«é©šã„ãŸè©±</li>
<li>6ç« ã¯ R ã§é ‘å¼µã£ã¦ã„ã‚‹</li>
<li>Gmail ã® IMAP ã® <code>[Gmail]/é€ä¿¡æ¸ˆã¿ãƒ¡ãƒ¼ãƒ«</code> ã¯è¨€èªè¨­å®šã§å¤‰ã‚ã‚‹è©±</li>
<li>ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿çš„ãªå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã©ã†ã„ã†ã®ãŒã‚ã‚‹ã®ã‹ã¨ã„ã†è©±</li>
<li>p.157 <code>ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒãƒ‡ãƒ¼ã‚¿å†…ã«å­˜åœ¨ã™ã‚‹</code> ã‹ã‚‰ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯é¢å€’ã¨ã„ã†è©±</li>
<li><a href="http://d.hatena.ne.jp/triadsou/20100528/1275042816">ggplot2 ã®è‡ªåˆ†ç”¨ãƒ¡ãƒ¢é›†ã‚’ä½œã‚ã† &ndash; Triad sou.</a></li>
<li>ãƒ“ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿ã®è©±ã¨ã—ã¦æœ‰åãªè³¼å…¥ã™ã‚‹ãƒ‡ã‚ªãƒ‰ãƒ©ãƒ³ãƒˆã¨çŸ³ã‘ã‚“ãŒå¤‰ã‚ã£ã¦å¦Šå¨ ãŒã‚ã‹ã£ãŸã¨ã„ã†è©±</li>
<li>PDF ã‹ã‚‰ Web ã‚¢ãƒ«ãƒãƒ ã®è©±</li>
</ul>


<h2></h2>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LILO ï¼† æ±æµ·é“ã‚‰ãã®ã‚¤ãƒ™ãƒ³ãƒˆã«å‚åŠ ã—ã¾ã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-03-lilo-event.html"/>
    <updated>2014-05-03T23:00:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/lilo-event</id>
    <content type="html"><![CDATA[<p><a href="http://lilo.doorkeeper.jp/events/10790">LILO ï¼† æ±æµ·é“ã‚‰ããƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆ2014/05/03ï¼‰</a> ã«å‚åŠ ã—ã¾ã—ãŸã€‚</p>

<p>ã‚¢ãƒ³ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹å½¢å¼ã§ç™ºè¡¨ã—ãŸã„äººãŒé †ç•ªã«å‰ã«å‡ºã¦è©±ã‚’ã™ã‚‹ã¨ã„ã†å½¢å¼ã§ã—ãŸã€‚</p>

<!--more-->


<h2>å†…å®¹</h2>

<p>å¤§éƒ¨åˆ†ã¯è³‡æ–™ã‚’ç”¨æ„ã—ã¦ã®ç™ºè¡¨ã¨ã„ã†å½¢å¼ã§ã¯ãªãã¦ã€
ç™ºè¡¨ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚‚ã¡ã‚ƒã‚“ã¨ã‚ã‚‹ã‚ã‘ã§ã¯ãªã‹ã£ãŸã®ã§ã€
å¤§é›‘æŠŠã«ã“ã†ã„ã†è©±ã§ã—ãŸã¨ã„ã†ãƒ¡ãƒ¢ã ã‘ã§ã™ã€‚</p>

<ul>
<li>è‡ªå·±ç´¹ä»‹1</li>
<li>ã—ã¾ã ã•ã‚“ã®æ±æµ·é“ã‚‰ãã®ç´¹ä»‹</li>
<li>è‡ªåˆ†ã® <code>libpam-google-authenticator</code> ã®è©±</li>
<li>è‡ªå·±ç´¹ä»‹2 (å¾Œã‹ã‚‰æ¥ãŸäººã®è‡ªå·±ç´¹ä»‹)</li>
<li>ãˆã®ãã•ã‚“ã® LibreOffice ã® QA ãªã©ã®ç›¸è«‡ (ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³)</li>
<li>ã•ã¨ã†ã•ã‚“ã® Raspberry Pi ã®è©±</li>
<li>çŸ¢å¹ã•ã‚“ã® LXC ãªã©ã®è©±</li>
<li>è‡ªå·±ç´¹ä»‹3 (ã•ã‚‰ã«å¾Œã‹ã‚‰æ¥ãŸäººã®è‡ªå·±ç´¹ä»‹)

<ul>
<li>pandoc ãŒã‚ªã‚¹ã‚¹ãƒ¡</li>
</ul>
</li>
<li>ã¨ã—ã²ã•ã•ã‚“ã® Raspberry Pi ã§ NTP Stratum 1 Server ã®è©±

<ul>
<li><a href="http://tosihisa.postach.io/raspberry-pi-de-ntp-stratum-1-server-wozuo-ru">Raspberry Pi ã§ NTP Stratum-1 Server ã‚’ä½œã‚‹ï¼ | tosihisa&rsquo;s public notebook</a></li>
<li><a href="http://www.pool.ntp.org/scores/60.56.214.78">http://www.pool.ntp.org/scores/60.56.214.78</a></li>
<li><code>ntpdate -quv ntp.netfort.gr.jp</code> ã§ç¢ºèªã§ãã¾ã—ãŸã€‚</li>
</ul>
</li>
<li>å®ˆå±‹ã•ã‚“ã® Linux ã®æ˜”è©±ã¨ã‹ã®è©±</li>
<li>ã“ã‚“ã©ã†ã•ã‚“ã® Flightgear ã®è©±</li>
<li>å¤§æµ¦ã•ã‚“ã® æ–‡å­—æ›¸ãèµ·ã“ã—ãƒ„ãƒ¼ãƒ« <a href="http://sourceforge.jp/projects/smart-gs/">SMART-GS</a> ã®è©±</li>
<li>ã•ã‹ã‚‚ã¨ã•ã‚“ã®ã‚«ãƒ¼ãƒãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è©±

<ul>
<li><a href="http://netcat.bandcamp.com/">http://netcat.bandcamp.com/</a></li>
<li><a href="https://github.com/usrbinnc/netcat-cpi-kernel-module">https://github.com/usrbinnc/netcat-cpi-kernel-module</a></li>
</ul>
</li>
</ul>


<h2>æ„Ÿæƒ³</h2>

<p>ã„ã‚ã„ã‚ãªå†…å®¹ã®è©±ãŒèã‘ã¦é¢ç™½ã‹ã£ãŸã§ã™ã€‚</p>

<p>è‡ªåˆ†ãŒè©±ã‚’ã™ã‚‹ã®ã¯ã€ LILO ã®ã‚µãƒ¼ãƒãƒ¼ç§»è¡Œã®è©±ã¨ã„ã†æ¡ˆã‚‚ã‚ã£ãŸã®ã§ã™ãŒã€
ãã‚Œã¯ã¡ã‚ƒã‚“ã¨ã¾ã¨ã‚ã‚‹æ™‚é–“ã‚’ã¨ã£ã¦ã‹ã‚‰ã®æ–¹ãŒè‰¯ã•ãã†ã¨æ€ã£ã¦ã€
äº‹å‰ã«ä¸€åº¦è©¦ã—ã¦ã„ãŸã“ã¨ã®ã‚ã£ãŸ <code>libpam-google-authenticator</code> ã‚’å‰ã®æ™©ã«è©¦ã—ç›´ã—ãªãŒã‚‰ãƒ‡ãƒ¢ã®é †ç•ªã‚’è€ƒãˆã¦ã€
ãã®è©±ã‚’ã—ã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mac OS X ã§ owncloudcmd ã‚’ä½¿ã†]]></title>
    <link href="http://blog.n-z.jp/blog/2014-05-02-owncloudcmd.html"/>
    <updated>2014-05-02T22:18:39+09:00</updated>
    <id>http://blog.n-z.jp/blog/owncloudcmd</id>
    <content type="html"><![CDATA[<p>ownCloud ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã¯ <code>owncloudcmd</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
æ˜”ã¯ <code>ocsync</code> ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãŒåˆ¥é€”ã‚ã£ãŸã‚ˆã†ã§ã™ãŒã€ä»Šã¯åŒæ¢±ã•ã‚Œã¦ã„ã‚‹ <code>owncloudcmd</code> ã‚’ä½¿ã†ã®ãŒä¸»æµã®ã‚ˆã†ã§ã™ã€‚</p>

<!--more-->


<h2>å¯¾è±¡ãƒãƒ¼ã‚¸ãƒ§ãƒ³</h2>

<ul>
<li>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ : ownCloud client for Mac 1.5.4 ã«åŒæ¢±ã® <code>owncloudcmd</code> ã§è©¦ã—ã¾ã—ãŸã€‚</li>
<li>ã‚µãƒ¼ãƒãƒ¼ : è‡ªå‰ã‚µãƒ¼ãƒãƒ¼ãªã‚‰ ownCloud 6.0.3 ã§ã€ä»Šå›ã®ä¾‹ã§ã¯ <a href="https://teracloud.jp/">Teraã‚¯ãƒ©ã‚¦ãƒ‰</a> ã‚’ä½¿ã£ã¦ã¿ã¾ã—ãŸã€‚</li>
</ul>


<h2>æ¦‚è¦</h2>

<p><code>path/to/owncloudcmd path/to/localdir ownclouds://example.jp/remote.php/webdav</code>
ã®ã‚ˆã†ã«ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ <code>owncloud</code> ã® WebDAV ç”¨ã® URL ã®å…ˆé ­ã® <code>http</code> ã‚’ <code>owncloud</code> ã«ç½®ãæ›ãˆãŸã‚‚ã® (<code>https</code> ãªã‚‰ <code>ownclouds</code>) ã‚’æŒ‡å®šã™ã‚‹ã¨åŒæœŸã§ãã¾ã™ã€‚</p>

<p>å¼•æ•°ãªã—ã§å®Ÿè¡Œã™ã‚‹ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®èª¬æ˜ãŒå‡ºã¾ã™ã€‚</p>

<h2>Mac OS X ç‰ˆã§ã®ä¿®æ­£</h2>

<h3><code>owncloudcmd</code> ã®ãƒªãƒ³ã‚¯ãƒŸã‚¹?</h3>

<p>æ™®é€šã«ä½¿ãŠã†ã¨ã™ã‚‹ã¨ <code>dyld: Library not loaded: libowncloudsync.0.dylib</code> ã§èµ·å‹•ã§ãã¾ã›ã‚“ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> /Applications/owncloud.app/Contents/MacOS/owncloudcmd <span class="nv">$HOME</span>/teracloud ownclouds://teracloud.jp/remote.php/webdav
</span><span class='line'><span class="go">dyld: Library not loaded: libowncloudsync.0.dylib</span>
</span><span class='line'><span class="go">  Referenced from: /Applications/owncloud.app/Contents/MacOS/owncloudcmd</span>
</span><span class='line'><span class="go">  Reason: image not found</span>
</span><span class='line'><span class="go">zsh: trace trap  /Applications/owncloud.app/Contents/MacOS/owncloudcmd</span>
</span></code></pre></td></tr></table></div></figure>


<h3>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‘ã‚¹ä¿®æ­£</h3>

<p><code>otool -L</code> ã§ç¢ºèªã™ã‚‹ã¨ç›¸å¯¾ãƒ‘ã‚¹ãŒã¾ãšã„ã¨ã‚ã‹ã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> otool -L /Applications/owncloud.app/Contents/MacOS/owncloudcmd
</span><span class='line'><span class="go">/Applications/owncloud.app/Contents/MacOS/owncloudcmd:</span>
</span><span class='line'><span class="go"> libowncloudsync.0.dylib (compatibility version 0.0.0, current version 1.5.4)</span>
</span><span class='line'><span class="go"> QtWebKit.framework/Versions/4/QtWebKit (compatibility version 4.9.0, current version 4.9.3)</span>
</span><span class='line'><span class="go"> QtXmlPatterns.framework/Versions/4/QtXmlPatterns (compatibility version 4.8.0, current version 4.8.4)</span>
</span><span class='line'><span class="go"> QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.4)</span>
</span><span class='line'><span class="go"> QtDBus.framework/Versions/4/QtDBus (compatibility version 4.8.0, current version 4.8.4)</span>
</span><span class='line'><span class="go"> QtXml.framework/Versions/4/QtXml (compatibility version 4.8.0, current version 4.8.4)</span>
</span><span class='line'><span class="go"> QtSql.framework/Versions/4/QtSql (compatibility version 4.8.0, current version 4.8.4)</span>
</span><span class='line'><span class="go"> QtNetwork.framework/Versions/4/QtNetwork (compatibility version 4.8.0, current version 4.8.4)</span>
</span><span class='line'><span class="go"> QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.4)</span>
</span><span class='line'><span class="go"> libocsync.0.dylib (compatibility version 0.0.0, current version 0.2.1)</span>
</span><span class='line'><span class="go"> /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11)</span>
</span><span class='line'><span class="go"> /usr/local/opt/sqlite/lib/libsqlite3.0.dylib (compatibility version 9.0.0, current version 9.6.0)</span>
</span><span class='line'><span class="go"> /usr/lib/libiconv.2.dylib (compatibility version 7.0.0, current version 7.0.0)</span>
</span><span class='line'><span class="go"> /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices (compatibility version 1.0.0, current version 44.0.0)</span>
</span><span class='line'><span class="go"> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 751.63.0)</span>
</span><span class='line'><span class="go"> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 1038.36.0)</span>
</span><span class='line'><span class="go"> @loader_path/../Frameworks/Sparkle.framework/Versions/A/Sparkle (compatibility version 1.5.0, current version 1.5.0)</span>
</span><span class='line'><span class="go"> /usr/local/lib/libqtkeychain.0.3.0.dylib (compatibility version 0.0.0, current version 0.3.0)</span>
</span><span class='line'><span class="go"> /usr/local/opt/neon/lib/libneon.27.dylib (compatibility version 31.0.0, current version 31.0.0)</span>
</span><span class='line'><span class="go"> /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>install_name_tool -add_rpath</code> ã‚„ <code>install_name_tool -delete_rpath</code> ã§è©¦è¡ŒéŒ¯èª¤ã—ãŸã®ã§ã™ãŒã€
<code>otool -l /Applications/owncloud.app/Contents/MacOS/owncloudcmd</code> ã§ç¢ºèªã—ã¦ã‚‚
<code>rpath</code> ãŒå¾Œã‚ã«è¿½åŠ ã•ã‚Œã¦ãã„ã¦ã„ãªã„ã‚ˆã†ã ã£ãŸã®ã§ã€
<code>install_name_tool -change</code> ã§å¯¾å¿œã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚</p>

<p>ã¾ãšç›¸å¯¾ãƒ‘ã‚¹ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span>  otool -L /Applications/owncloud.app/Contents/MacOS/owncloudcmd | awk <span class="s1">&#39;$1~&quot;^lib&quot;{print &quot;install_name_tool -change &quot; $1 &quot; @executable_path/../MacOS/&quot; $1 &quot; /Applications/owncloud.app/Contents/MacOS/owncloudcmd&quot; }&#39;</span> | sh -e
</span><span class='line'><span class="gp">%</span>  otool -L /Applications/owncloud.app/Contents/MacOS/owncloudcmd | awk <span class="s1">&#39;$1~&quot;^Qt&quot;{print &quot;install_name_tool -change &quot; $1 &quot; @executable_path/../Frameworks/&quot; $1 &quot; /Applications/owncloud.app/Contents/MacOS/owncloudcmd&quot; }&#39;</span> | sh -e
</span></code></pre></td></tr></table></div></figure>


<p>ã•ã‚‰ã« <code>/usr/local/lib</code> ã‚’ã•ã—ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã£ãŸã®ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span>  /Applications/owncloud.app/Contents/MacOS/owncloudcmd
</span><span class='line'><span class="go">dyld: Library not loaded: /usr/local/lib/libqtkeychain.0.3.0.dylib</span>
</span><span class='line'><span class="go">  Referenced from: /Applications/owncloud.app/Contents/MacOS/owncloudcmd</span>
</span><span class='line'><span class="go">  Reason: image not found</span>
</span><span class='line'><span class="go">zsh: trace trap  /Applications/owncloud.app/Contents/MacOS/owncloudcmd</span>
</span><span class='line'><span class="gp">%</span>  find /Applications/owncloud.app -name libqtkeychain.0.3.0.dylib
</span><span class='line'><span class="go">/Applications/owncloud.app/Contents/MacOS/libqtkeychain.0.3.0.dylib</span>
</span><span class='line'><span class="gp">%</span>  install_name_tool -change /usr/local/lib/libqtkeychain.0.3.0.dylib /Applications/owncloud.app/Contents/MacOS/libqtkeychain.0.3.0.dylib /Applications/owncloud.app/Contents/MacOS/owncloudcmd
</span><span class='line'><span class="gp">%</span>  /Applications/owncloud.app/Contents/MacOS/owncloudcmd
</span><span class='line'><span class="go">dyld: Library not loaded: /usr/local/opt/neon/lib/libneon.27.dylib</span>
</span><span class='line'><span class="go">  Referenced from: /Applications/owncloud.app/Contents/MacOS/owncloudcmd</span>
</span><span class='line'><span class="go">  Reason: image not found</span>
</span><span class='line'><span class="go">zsh: trace trap  /Applications/owncloud.app/Contents/MacOS/owncloudcmd</span>
</span><span class='line'><span class="gp">%</span>  find /Applications/owncloud.app -name libneon.27.dylib
</span><span class='line'><span class="go">/Applications/owncloud.app/Contents/MacOS/libneon.27.dylib</span>
</span><span class='line'><span class="gp">%</span>  install_name_tool -change /usr/local/opt/neon/lib/libneon.27.dylib /Applications/owncloud.app/Contents/MacOS/libneon.27.dylib /Applications/owncloud.app/Contents/MacOS/owncloudcmd
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã‚Œã§ä½™è¨ˆãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯å‡ºã¾ã™ãŒã€ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span>  /Applications/owncloud.app/Contents/MacOS/owncloudcmd
</span><span class='line'><span class="go">objc[40210]: Class WebCoreMovieObserver is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">objc[40210]: Class WebCoreSharedBufferData is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">objc[40210]: Class WebVideoFullscreenWindow is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">objc[40210]: Class WebVideoFullscreenController is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">objc[40210]: Class WebVideoFullscreenHUDWindowController is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">objc[40210]: Class WebVideoFullscreenHUDWindow is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">objc[40210]: Class WebWindowFadeAnimation is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">objc[40210]: Class WebWindowScaleAnimation is implemented in both /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore and /Applications/owncloud.app/Contents/Frameworks/QtWebKit.framework/Versions/4/QtWebKit. One of the two will be used. Which one is undefined.</span>
</span><span class='line'><span class="go">owncloudcmd - command line ownCloud client tool.</span>
</span><span class='line'>
</span><span class='line'><span class="go">Usage: owncloudcmd &lt;sourcedir&gt; &lt;owncloudurl&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="go">A proxy can either be set manually using --httpproxy or it</span>
</span><span class='line'><span class="go">uses the setting from a configured sync client.</span>
</span><span class='line'>
</span><span class='line'><span class="go">Options:</span>
</span><span class='line'><span class="go">  --confdir = configdir: Read config from there.</span>
</span><span class='line'><span class="go">  --httpproxy = proxy:   Specify a http proxy to use.</span>
</span><span class='line'><span class="go">                         Proxy is http://server:port</span>
</span><span class='line'>
</span><span class='line'><span class="go">zsh: exit 1     /Applications/owncloud.app/Contents/MacOS/owncloudcmd</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ä½¿ã„æ–¹</h2>

<p>æ¦‚è¦ã®ã¨ã“ã‚ã«æ›¸ã„ãŸã‚ˆã†ã«ã€
æ™®é€šã« <code>owncloudcmd sourcedir owncloudurl</code> ã§å®Ÿè¡Œã™ã‚‹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’èã‹ã‚Œã¾ã™ã€‚
URL ã« <code>ownclouds://user:password@example.jp/remote.php/webdav</code> ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’åŸ‹ã‚è¾¼ã‚€ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ãŒã€ã‚ã¾ã‚Šã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯æ›¸ããŸããªã„ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>ã—ã‹ã—ã€
<a href="https://github.com/owncloud/mirall/blob/f72e1cc8375b72c97d6566c6875f7214415cea9c/src/owncloudcmd/owncloudcmd.cpp">owncloudcmd ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³å‡¦ç†éƒ¨åˆ†ã®ã‚½ãƒ¼ã‚¹</a>
ã‚’ã¿ã¦ã‚‚ <code>"--confdir"</code> ã¯èª­ã¿è¾¼ã‚€ã ã‘ã§ä½¿ã‚ã‚Œã¦ã„ãªã„ã‚ˆã†ãªã®ã§ã€
ä»–ã®æ–¹æ³•ã§æŒ‡å®šã™ã‚‹ã“ã¨ã¯å‡ºæ¥ãªã•ãã†ã§ã—ãŸã€‚</p>

<h2>ã¾ã¨ã‚</h2>

<p><code>owncloudcmd</code> ã‚’ä½¿ãˆã° GUI ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§è¨­å®šã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã®ã‚µãƒ¼ãƒãƒ¼ã¨åŒæœŸã—ãŸã‚Šã€
ã‚µãƒ¼ãƒãƒ¼ãªã©ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®ã¿ã®ç’°å¢ƒã§ã‚‚ <code>owncloud</code> ã¨ã®åŒæœŸãŒå‡ºæ¥ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>

<p>ã—ã‹ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å‡ºæ¥ãŒã¾ã ã‚ã¾ã‚Šã‚ˆããªã„ã®ã§ã€ä½¿ã„å‹æ‰‹ã¯è‰¯ããªã„ã¨ã„ã†ã“ã¨ã‚‚ã‚ã‹ã‚Šã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¬¬ 10 å› RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka ã«å‚åŠ ã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-04-23-rubymotion-mokumoku.html"/>
    <updated>2014-04-23T19:16:51+09:00</updated>
    <id>http://blog.n-z.jp/blog/rubymotion-mokumoku</id>
    <content type="html"><![CDATA[<p>ç¬¬ 1 å›ã‹ã‚‰ç¬¬ 9 å›ã«ã‚‚å‚åŠ ã—ãŸ RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka ã®
<a href="http://connpass.com/event/5674/">ç¬¬ 10 å› RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka</a>
ã«å‚åŠ ã—ã¦ãã¾ã—ãŸã€‚</p>

<p>æ¬¡å›ã®
<a href="http://connpass.com/event/6116/">ç¬¬ 11 å› RubyMotion ã‚‚ãã‚‚ãä¼š in Osaka &ndash; connpass</a>
ã¯ 05/28(æ°´) ã«ãªã‚Šã¾ã—ãŸã€‚</p>

<!--more-->


<h2>ãƒ¡ãƒ¢</h2>

<ul>
<li><a href="https://itunes.apple.com/jp/app/bokosuka!mogurando/id845835380?mt=8">ãƒœã‚³ã‚¹ã‚«ï¼ãƒ¢ã‚°ãƒ©ãƒ³ãƒ‰</a></li>
<li><a href="http://www.amazon.co.jp/gp/product/4873116678/ref=as_li_ss_tl?ie=UTF8&amp;camp=247&amp;creative=7399&amp;creativeASIN=4873116678&amp;linkCode=as2&amp;tag=znz-22">AngularJSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚¬ã‚¤ãƒ‰</a><img src="http://ir-jp.amazon-adsystem.com/e/ir?t=znz-22&amp;l=as2&amp;o=9&amp;a=4873116678" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /> ãŒç™ºå£²ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†è©±</li>
<li><a href="http://www.pixate.com/">Pixate</a></li>
<li>MacFace</li>
<li><a href="https://github.com/HipByte/RubyMotionSamples/issues/31">osx/Tweets app crashes on launch</a></li>
<li><a href="http://www.impress-plus.co.jp/">http://www.impress-plus.co.jp/</a></li>
</ul>


<h2>èª¿æŸ»ç¶šã</h2>

<p>å¼•ãç¶šãåˆå›èµ·å‹•æ™‚ã® URL ã®å—ã‘å–ã‚Šæ–¹ã‚’èª¿ã¹ã¦ã„ã¾ã—ãŸã€‚</p>

<ul>
<li><a href="http://questbeat.hatenablog.jp/entry/2014/04/19/123207">ã€Œãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«èµ·å‹•ã€ã‚’å®Ÿè£…ã™ã‚‹</a> ã¯ã‚ã‚“ã¾ã‚Šé–¢ä¿‚ãªã‹ã£ãŸã€‚</li>
<li>GitHub ã§ <code>LSSetDefaultHandlerForURLScheme</code> ã‚’æ¤œç´¢

<ul>
<li><a href="https://github.com/s-faychatelard/Helm/blob/2c85b303781fa430432c17ed9848a0b252c82eae/sources/others/mac/mac.mm">https://github.com/s-faychatelard/Helm/blob/2c85b303781fa430432c17ed9848a0b252c82eae/sources/others/mac/mac.mm</a> : Qt ã§å®Ÿè£…ã—ã¦ã„ã¦ URL ã‚’å—ã‘å–ã£ã¦ã„ã‚‹éƒ¨åˆ†ãŒã‚ã‹ã‚‰ãš (Qt ã®ã‚¤ãƒ™ãƒ³ãƒˆã«å¤‰æ›ã•ã‚ŒãŸã‚‚ã®ã‚’å—ã‘å–ã£ã¦ã„ã‚‹?)</li>
<li><a href="https://github.com/bigbearlabs/MotionKit/blob/51f46c14b52819b709c57d6e1c954d84c852e48b/lib/motion-kit/misc/osx/osx_browsers.rb">https://github.com/bigbearlabs/MotionKit/blob/51f46c14b52819b709c57d6e1c954d84c852e48b/lib/motion-kit/misc/osx/osx_browsers.rb</a> : ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®ä¸€è¦§ã®å–å¾—ãªã©</li>
<li><a href="https://github.com/bigbearlabs/MotionKit/blob/51f46c14b52819b709c57d6e1c954d84c852e48b/lib/motion-kit/app/osx/app.rb">https://github.com/bigbearlabs/MotionKit/blob/51f46c14b52819b709c57d6e1c954d84c852e48b/lib/motion-kit/app/osx/app.rb</a> : <code>application:openFile:</code> ã‚„ <code>application:openFiles:</code> ã§å—ã‘å–ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ãŒè©¦ã—ã¦ã¿ã¦ã‚‚å‘¼ã°ã‚Œãªã„ã€‚</li>
<li><a href="https://github.com/gnyrd/WebEx/blob/0ea21241591e496d1d702c45768400fa14d75662/URLHandler.m">https://github.com/gnyrd/WebEx/blob/0ea21241591e496d1d702c45768400fa14d75662/URLHandler.m</a> : <code>kAEGetURL</code> ã®ç™»éŒ²ã« <code>handleGetURLEvent:withReplyEvent:</code> (2å¼•æ•°) ã§ã¯ãªã <code>getURL:</code> (1å¼•æ•°) ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚</li>
</ul>
</li>
</ul>


<p>å‰å›ã¾ã§ã®è©¦è¡ŒéŒ¯èª¤ã®é€”ä¸­ã§ <code>setEventHandler</code> ã®å‘¼ã³å‡ºã—ã‚’ <code>applicationDidFinishLaunching:</code> ã‹ã‚‰ <code>initialize</code> ã«ç§»å‹•ã—ã¦ã„ãŸã®ã¨ <code>getURL:</code> ã¸ã®å¤‰æ›´ã®çµ„ã¿åˆã‚ã›ã§ã€ã‚„ã£ã¨åˆå›èµ·å‹•æ™‚ã«ã‚‚ URL ãŒå—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã€
ã•ã‚‰ã« <code>rake clean</code> ã—ãŸã‚Šä¸€åº¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã‚’ä»–ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã«è¨­å®šã—ç›´ã—ãŸã‚Šã—ã¦ã„ãŸã‚‰ã€
<code>handleGetURLEvent:withReplyEvent:</code> ã«æˆ»ã—ã¦ã‚‚åˆå›èµ·å‹•æ™‚ã«å—ã‘å–ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã—ãŸã€‚</p>

<p>åŸå› ãŒã¯ã£ãã‚Šã—ãªã„ã®ãŒå«Œãªæ„Ÿã˜ã§ã™ãŒã€ä½•ã‹è¨­å®šãŒä¸­é€”åŠç«¯ã«æ®‹ã£ã¦ã„ã‚‹ã¨ã†ã¾ãå‹•ã‹ãªã‹ã£ãŸã‚ˆã†ã§ã™ã€‚</p>

<h2>RubyMine</h2>

<p>å‰å›ã®ã‚‚ãã‚‚ãä¼šã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€ä»–ã§ã¯ä½¿ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã€
ã»ã¼ä½¿ã£ã¦ã„ãªã„ã¾ã¾ç™»éŒ²ã›ãšè©¦ç”¨æœŸé™ãŒåˆ‡ã‚Œã¦ã—ã¾ã£ã¦ã€
30åˆ†ã”ã¨ã«çµ‚äº†ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[homebrew cask ã§ sylpheed test1 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-04-21-brew-cask-sylpheed.html"/>
    <updated>2014-04-21T23:00:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/brew-cask-sylpheed</id>
    <content type="html"><![CDATA[<p><a href="http://sylpheed.sraoss.jp/ja/news.html">Sylpheed 3.4.1-test1 for Mac OS X (ãƒ†ã‚¹ãƒˆç‰ˆ)</a>
ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ãŸã®ã§ã€
homebrew cask ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<p>dmg ã§é…å¸ƒã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ homebrew cask ã«å¯¾å¿œã•ã›ã‚‹ä¾‹ã¨ã—ã¦ã‚‚å‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>

<!--more-->


<h2>homebrew cask ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p><a href="http://brew.sh/">Homebre</a>
ã¨
<a href="https://github.com/phinze/homebrew-cask">homebrew-cask</a>
ã‚’ã‚ã‚‰ã‹ã˜ã‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ã€‚</p>

<h2>cask ä½œæˆ</h2>

<p><code>brew cask create sylpheed-test</code> ã§ä½œæˆã—ã¦ã€
å†…å®¹ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">SylpheedTest</span> <span class="o">&lt;</span> <span class="no">Cask</span>
</span><span class='line'>  <span class="n">url</span> <span class="s1">&#39;http://sylpheed.sraoss.jp/sylpheed/macosx/Sylpheed_3.4.1-test1.dmg&#39;</span>
</span><span class='line'>  <span class="n">homepage</span> <span class="s1">&#39;http://sylpheed.sraoss.jp/&#39;</span>
</span><span class='line'>  <span class="n">version</span> <span class="s1">&#39;3.4.1-test1&#39;</span>
</span><span class='line'>  <span class="n">sha256</span> <span class="s1">&#39;52505ab7913fd58fa921a9c8b574286f08073321b440b7aa23dba3896b4b2ddc&#39;</span>
</span><span class='line'>  <span class="n">link</span> <span class="s1">&#39;Sylpheed.app&#39;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>sha256</code> ã¯
<a href="https://github.com/phinze/homebrew-cask/blob/master/CONTRIBUTING.md#cask-stanzas">Cask Stanzas</a>
ã®èª¬æ˜ã«ã‚ã‚‹ã‚ˆã†ã«åˆ¥é€” <code>url</code> ã«æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ <code>shasum -a 256 &lt;file&gt;</code> ã§èª¿ã¹ã¾ã—ãŸã€‚
ã‚‚ã— upstream ã®ãƒªãƒªãƒ¼ã‚¹ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ã«æ›¸ã„ã¦ã‚ã‚Œã°ã€ãã‚Œã‚’ãã®ã¾ã¾ä½¿ãˆã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>ç·¨é›†é€”ä¸­ã§é–‰ã˜ã¦ã—ã¾ã£ãŸå ´åˆã¯
<code>brew cask edit sylpheed-test</code>
ã§å†ç·¨é›†ã§ãã¾ã™ã€‚</p>

<p>å®Ÿä½“ã¯ <code>$(brew --prefix)/Library/Taps/phinze-cask/Casks/sylpheed-test.rb</code> ã«ã‚ã‚Šã¾ã™ã€‚</p>

<h2>ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p><code>sylpheed-test.rb</code> ãŒä½œæˆã§ããŸã‚‰ <code>brew cask install sylpheed-test</code> ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> brew cask install sylpheed-test
</span><span class='line'><span class="go">==&gt; Downloading http://sylpheed.sraoss.jp/sylpheed/macosx/Sylpheed_3.4.1-test1.dmg</span>
</span><span class='line'><span class="gp">#</span><span class="c">####################################################################### 100.0%</span>
</span><span class='line'><span class="go">==&gt; Symlinking App &#39;Sylpheed.app&#39; to &#39;/Users/kazu/Applications/Sylpheed.app&#39;</span>
</span><span class='line'><span class="go">ğŸº  sylpheed-test installed to &#39;/opt/homebrew-cask/Caskroom/sylpheed-test/3.4.1-test1&#39; (314 files, 32M)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>èµ·å‹•</h2>

<p>Launchpad ã‹ã‚‰èµ·å‹•ã—ãŸã‚Šã€Spotlight ã§æ¤œç´¢ã—ãŸã‚Šã—ã¦æ™®é€šã«èµ·å‹•ã—ã¾ã™ã€‚</p>

<p>åˆå›èµ·å‹•ã§
<code>~/Library/Application Support/Sylpheed/Mailboxes/Mail</code>
ã‚’ä½œã‚‹ã‹ãã‹ã‚Œã¾ã—ãŸãŒã€ãã®æ™‚ç‚¹ã§æ—¢ã«
<code>~/Library/Application Support/Sylpheed</code>
ã¯ä½œæˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚</p>

<h2>ã¾ã¨ã‚</h2>

<p>ãƒ†ã‚¹ãƒˆç‰ˆãªã®ã§ã€ã¾ã å¤‰ãªã¨ã“ã‚ã¯ã‚ã‚‹ã‚ˆã†ã§ã™ãŒ (Command+V ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼ã®ãƒˆã‚°ãƒ«ã«ãªã£ã¦ãƒšãƒ¼ã‚¹ãƒˆã§ããªã„ã¨ã‹)
Mac OS X ç‰ˆç‰¹æœ‰ã®å•é¡ŒãŒã‚ã‚‹ã ã‘ã®ã‚ˆã†ãªã®ã§ã€ä»Šå¾Œã®æ­£å¼ç‰ˆã«æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚</p>

<p>ã¾ã  test ç‰ˆãªã®ã§ pull request ã¯ã—ã¦ã„ãªã„ã®ã§ã™ãŒã€
æ­£å¼ç‰ˆãŒå‡ºãŸã‚‰ homebrew cask ã« pull request ã‚’é€ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
beta ç‰ˆãªã©ã‚‚å¯¾å¿œã™ã‚‹ãªã‚‰
<a href="https://github.com/caskroom/homebrew-versions">homebrew-cask-versions</a>
ã« pull request ã‚’é€ã‚‹ã¨è‰¯ã•ãã†ã§ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu 14.04 ã§ dokku ã‚’ä½¿ã†]]></title>
    <link href="http://blog.n-z.jp/blog/2014-04-18-ubuntu-1404-dokku.html"/>
    <updated>2014-04-18T23:00:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/ubuntu-1404-dokku</id>
    <content type="html"><![CDATA[<p>Ubuntu 14.04 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã§ã€
<a href="https://github.com/progrium/dokku">dokku</a>
ã‚’ Ubuntu 14.04 ã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>dokku ã® Vagrantfile ã‚’ç¢ºèªã™ã‚‹</h2>

<p>ã¾ãš dokku ã‚’ clone ã—ã¦ä¸­ã® Vagrantfile ã‚’ã¿ã¦ã€
ç’°å¢ƒå¤‰æ•°ã§è¨­å®šã§ãã‚‹é …ç›®ãŒã‚ã‚‹ã®ã‚’ç¢ºèªã—ã¦ãŠãã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> git clone https://github.com/progrium/dokku
</span><span class='line'><span class="gp">%</span> <span class="nb">cd </span>dokku
</span><span class='line'><span class="gp">%</span> vi Vagrantfile
</span></code></pre></td></tr></table></div></figure>


<h2>Vagantfile ã‚’å¤‰æ›´ã™ã‚‹</h2>

<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® apt-line ã®ã¾ã¾ã ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒé…ã„ã®ã§ã€
<a href="http://mirrors.ubuntu.com/mirrors.txt">http://mirrors.ubuntu.com/mirrors.txt</a>
ã‹ã‚‰ãƒŸãƒ©ãƒ¼ã‚µãƒ¼ãƒãƒ¼ã‚’é¸ã‚“ã§ (ä»Šå›ã¯ jaist ã‚’é¸æŠ)ã€
shell provision ã®ã¨ã“ã‚ã§æ›¸ãæ›ãˆã¦ãŠãã¾ã™ã€‚
(é–¢ä¿‚ãªã„ã¨ã“ã‚ã«ãƒãƒƒãƒã—ã¦å•é¡ŒãŒèµ·ãã‚‹å¯èƒ½æ€§ã¯ã»ã¼ãªã„ã®ã§ã€ç½®æ›å…ƒã® URL ã® <code>.</code> ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ã¦ã„ã¾ã›ã‚“ã€‚)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/Vagrantfile b/Vagrantfile</span>
</span><span class='line'><span class="gh">index a310f6b..7c1a133 100644</span>
</span><span class='line'><span class="gd">--- a/Vagrantfile</span>
</span><span class='line'><span class="gi">+++ b/Vagrantfile</span>
</span><span class='line'><span class="gu">@@ -29,5 +29,10 @@ Vagrant::configure(&quot;2&quot;) do |config|</span>
</span><span class='line'>     vb.customize [&quot;modifyvm&quot;, :id, &quot;--memory&quot;, BOX_MEMORY]
</span><span class='line'>   end
</span><span class='line'>
</span><span class='line'><span class="gd">-  config.vm.provision :shell, :inline =&gt; &quot;apt-get -y install git &amp;&amp; cd /root/dokku &amp;&amp; #{make_cmd}&quot;</span>
</span><span class='line'><span class="gi">+  config.vm.provision :shell, :inline =&gt; &lt;&lt;-SHELL</span>
</span><span class='line'><span class="gi">+    sed -i~ -e &#39;s;http://archive.ubuntu.com/ubuntu;http://ftp.jaist.ac.jp/pub/Linux/ubuntu;&#39; /etc/apt/sources.list &amp;&amp;</span>
</span><span class='line'><span class="gi">+    apt-get update &amp;&amp;</span>
</span><span class='line'><span class="gi">+    apt-get -y install git &amp;&amp;</span>
</span><span class='line'><span class="gi">+    cd /root/dokku &amp;&amp; #{make_cmd}</span>
</span><span class='line'><span class="gi">+  SHELL</span>
</span><span class='line'> end
</span></code></pre></td></tr></table></div></figure>


<h2>åˆå›èµ·å‹•</h2>

<p><code>BOX_NAME</code>, <code>BOX_URI</code> ã« trusty ã‚’æŒ‡å®šã—ã¦ã€
<code>BOX_MEMORY</code> ã‚‚ 512 ã‹ã‚‰ 2048 ã«å¢—ã‚„ã—ãŸå€¤ã‚’æŒ‡å®šã—ã¦èµ·å‹•ã—ã¾ã™ã€‚</p>

<p><code>node-js-sample</code> ã ã¨ 512 ãƒ¡ã‚¬ã§ã‚‚å•é¡Œãªã„ã®ã§ã™ãŒã€
Rails ã‚¢ãƒ—ãƒªã‚’å‹•ã‹ãã†ã¨ã™ã‚‹ã¨ãƒ¡ãƒ¢ãƒªä¸è¶³ã§ <code>bundle install</code> ã®é€”ä¸­ã§å¤±æ•—ã—ã¦
deploy ã§ããªã‹ã£ãŸã®ã§å¢—ã‚„ã—ã¦ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> <span class="nv">BOX_NAME</span><span class="o">=</span>trusty-amd64-20140418 <span class="nv">BOX_URI</span><span class="o">=</span>https://cloud-images.ubuntu.com/vagrant/trusty/20140418/trusty-server-cloudimg-amd64-vagrant-disk1.box <span class="nv">BOX_MEMORY</span><span class="o">=</span>2048 vagrant up
</span></code></pre></td></tr></table></div></figure>


<p>box ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€
VM ã®ä½œæˆãªã©ã«ã¯æ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§ã€
ä»–ã®ã“ã¨ã‚’ã—ãªãŒã‚‰ã‚†ã£ãã‚Šå¾…ã¡ã¾ã™ã€‚</p>

<h2>äºŒåº¦ç›®ä»¥é™ã®èµ·å‹•</h2>

<p>VM ã®ä½œæˆãŒã§ãã¦ã„ã‚‹çŠ¶æ…‹ãªã‚‰ã€
box ã®è¨­å®šã¯å‚ç…§ã•ã‚Œãªã„ã®ã§çœç•¥ã§ãã¾ã™ã€‚
<code>vagrant destroy</code> ã—ãŸå¾Œã« <code>vagrant up</code> ã—ç›´ã—ãŸã¨ãã¯å‚ç…§ã•ã‚Œã‚‹ã®ã§ã€
æ¯å›è¨­å®šã—ã¦ã„ã¦ã‚‚ã‹ã¾ã„ã¾ã›ã‚“ã€‚</p>

<p><code>BOX_MEMORY</code> ã¯æ¯å›è¨­å®šã•ã‚Œã‚‹ã®ã§ã€æŒ‡å®šã‚’å¿˜ã‚Œã‚‹ã¨ 512 ã«æˆ»ã£ã¦ã—ã¾ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> <span class="nv">BOX_MEMORY</span><span class="o">=</span>2048 vagrant up
</span></code></pre></td></tr></table></div></figure>


<h2>dokku ã®åˆæœŸè¨­å®š</h2>

<p>ssh ã®éµã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> vagrant ssh
</span><span class='line'><span class="gp">vagrant@dokku:~$</span> egrep <span class="s1">&#39;^ssh&#39;</span> ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant
</span><span class='line'><span class="go">dd:3b:b8:2e:85:04:06:e9:ab:ff:a8:0a:c0:04:6e:d6</span>
</span><span class='line'><span class="gp">vagrant@dokku:~$</span> cat ~/.ssh/authorized_keys
</span><span class='line'><span class="gp">#</span> CLOUD_IMG: This file was created/modified by the Cloud Image build process
</span><span class='line'><span class="go">ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key</span>
</span><span class='line'><span class="gp">vagrant@dokku:~$</span> cat /home/dokku/.ssh/authorized_keys
</span><span class='line'><span class="go">command=&quot;FINGERPRINT=dd:3b:b8:2e:85:04:06:e9:ab:ff:a8:0a:c0:04:6e:d6 NAME=vagrant `cat /home/dokku/.sshcommand` $SSH_ORIGINAL_COMMAND&quot;,no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key</span>
</span></code></pre></td></tr></table></div></figure>


<h2>dokku ã®éµè¿½åŠ å¤±æ•—ä¾‹</h2>

<p><code>cat ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant</code>
ã§è¿½åŠ ã—ã¦ã—ã¾ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>vagrant@dokku:~$ cat /home/dokku/.ssh/authorized_keys
</span><span class='line'>command=&quot;FINGERPRINT=is NAME=vagrant `cat /home/dokku/.sshcommand` $SSH_ORIGINAL_COMMAND&quot;,no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding # CLOUD_IMG: This file was created/modified by the Cloud Image build process
</span><span class='line'>ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">KEY</span><span class="o">=</span><span class="k">$(</span>cat<span class="k">)</span>
</span><span class='line'><span class="nv">FINGERPRINT</span><span class="o">=</span><span class="k">$(</span>ssh-keygen -lf /dev/stdin <span class="o">&lt;&lt;&lt;</span> <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$KEY</span><span class="k">)</span> | awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>
</span><span class='line'><span class="nv">KEY_PREFIX</span><span class="o">=</span><span class="s2">&quot;command=\&quot;FINGERPRINT=$FINGERPRINT NAME=$NAME \`cat $USERHOME/.sshcommand\` \$SSH_ORIGINAL_COMMAND\&quot;,no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding&quot;</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;$KEY_PREFIX $KEY&quot;</span> &gt;&gt; <span class="s2">&quot;$USERHOME/.ssh/authorized_keys&quot;</span>
</span><span class='line'><span class="nb">echo</span> <span class="nv">$FINGERPRINT</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã®éƒ¨åˆ†ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã« <code>while read</code> ãƒ«ãƒ¼ãƒ—ã«å¤‰ãˆãŸæ–¹ãŒè‰¯ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="k">while </span><span class="nb">read </span>KEY; <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="nv">FINGERPRINT</span><span class="o">=</span><span class="k">$(</span>ssh-keygen -lf /dev/stdin <span class="o">&lt;&lt;&lt;</span> <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$KEY</span><span class="k">)</span> | awk <span class="s1">&#39;{print $2}&#39;</span><span class="k">)</span>
</span><span class='line'>  <span class="nv">KEY_PREFIX</span><span class="o">=</span><span class="s2">&quot;command=\&quot;FINGERPRINT=$FINGERPRINT NAME=$NAME \`cat $USERHOME/.sshcommand\` \$SSH_ORIGINAL_COMMAND\&quot;,no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding&quot;</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;$KEY_PREFIX $KEY&quot;</span> &gt;&gt; <span class="s2">&quot;$USERHOME/.ssh/authorized_keys&quot;</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="nv">$FINGERPRINT</span>
</span><span class='line'><span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<h2>node-js-sample ã® deploy</h2>

<p><code>node-js-sample</code> ã‚’ <code>deploy</code> ã—ã¦å‹•ä½œç¢ºèªã—ã¾ã™ã€‚
ä»¥ä¸‹ã®ä¾‹ã§ã¯ <code>ssh dokku</code> ã§ VM ã«æ¥ç¶šã§ãã‚‹ã‚ˆã†ã« <code>~/.ssh/config</code> ã«è¨­å®šæ¸ˆã¿ã§ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> git clone https://github.com/heroku/node-js-sample
</span><span class='line'><span class="go">Cloning into &#39;node-js-sample&#39;...</span>
</span><span class='line'><span class="go">remote: Reusing existing pack: 319, done.</span>
</span><span class='line'><span class="go">remote: Total 319 (delta 0), reused 0 (delta 0)</span>
</span><span class='line'><span class="go">Receiving objects: 100% (319/319), 201.92 KiB | 210.00 KiB/s, done.</span>
</span><span class='line'><span class="go">Resolving deltas: 100% (17/17), done.</span>
</span><span class='line'><span class="go">Checking connectivity... done.</span>
</span><span class='line'><span class="gp">%</span> <span class="nb">cd </span>node-js-sample
</span><span class='line'><span class="gp">%</span> git remote add dokku dokku:node-js-app
</span><span class='line'><span class="gp">%</span>  git push --set-upstream dokku master
</span><span class='line'><span class="go">Counting objects: 319, done.</span>
</span><span class='line'><span class="go">Delta compression using up to 4 threads.</span>
</span><span class='line'><span class="go">Compressing objects: 100% (274/274), done.</span>
</span><span class='line'><span class="go">Writing objects: 100% (319/319), 201.92 KiB | 0 bytes/s, done.</span>
</span><span class='line'><span class="go">Total 319 (delta 17), reused 319 (delta 17)</span>
</span><span class='line'><span class="go">-----&gt; Cleaning up ...</span>
</span><span class='line'><span class="go">remote: Cloning into &#39;/tmp/tmp.ChNvZEb5S9&#39;...</span>
</span><span class='line'><span class="go">-----&gt; Building node-js-app ...</span>
</span><span class='line'><span class="go">remote: warning: You appear to have cloned an empty repository.</span>
</span><span class='line'><span class="go">remote: done.</span>
</span><span class='line'><span class="go">remote: HEAD is now at 2e52ce7... Update documentation links</span>
</span><span class='line'><span class="go">       Node.js app detected</span>
</span><span class='line'><span class="go">-----&gt; Requested node range:  0.10.x</span>
</span><span class='line'><span class="go">-----&gt; Resolved node version: 0.10.26</span>
</span><span class='line'><span class="go">-----&gt; Downloading and installing node</span>
</span><span class='line'><span class="go">(çœç•¥)</span>
</span><span class='line'><span class="go">-----&gt; Discovering process types</span>
</span><span class='line'><span class="go">       Procfile declares types -&gt; web</span>
</span><span class='line'><span class="go">-----&gt; Releasing node-js-app ...</span>
</span><span class='line'><span class="go">-----&gt; Deploying node-js-app ...</span>
</span><span class='line'><span class="go">=====&gt; Application deployed:</span>
</span><span class='line'><span class="go">       http://node-js-app.dokku.me</span>
</span><span class='line'>
</span><span class='line'><span class="go">To dokku:node-js-app</span>
</span><span class='line'><span class="go"> * [new branch]      master -&gt; master</span>
</span><span class='line'><span class="go">Branch master set up to track remote branch master from dokku.</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vagrantfile ã§ guest ã® 80 ç•ªãƒãƒ¼ãƒˆã‚’ host ã® 8080 ç•ªãƒãƒ¼ãƒˆã§è¦‹ãˆã‚‹ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§
<code>http://node-js-app.dokku.me:8080/</code>
ã§é–‹ãã¨ <code>Hello World!</code> ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vagrant ã§ Ubuntu 14.04 ã‚’è©¦ã™]]></title>
    <link href="http://blog.n-z.jp/blog/2014-04-18-ubuntu-1404-vagrant.html"/>
    <updated>2014-04-18T13:00:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/ubuntu-1404-vagrant</id>
    <content type="html"><![CDATA[<p>Vagrant ã§ Ubuntu 14.04 LTS (trusty) ã‚’è©¦ã—ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>Vagrantfile ä½œæˆ</h2>

<p>ã¾ãš <code>Vagrantfile</code> ã‚’ä½œæˆã—ã¾ã™ã€‚
box ãƒ•ã‚¡ã‚¤ãƒ«ã® URL ã¯
<a href="https://cloud-images.ubuntu.com/vagrant/trusty/">https://cloud-images.ubuntu.com/vagrant/trusty/</a>
ã‹ã‚‰æ¢ã—ã¾ã™ã€‚
current ã«ã™ã‚‹ã¨ã„ã¤ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚ã‹ã‚Šã«ãã„ã®ã§ã€
æ—¥ä»˜ã® URL ã¨ box åã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚</p>

<p><a href="https://cloud-images.ubuntu.com/vagrant/">https://cloud-images.ubuntu.com/vagrant/</a>
ã«ã¯
<code>Ubuntu Server 14.04 LTS (Trusty Tahr) daily builds</code>
ã¨æ›¸ã„ã¦ã‚ã‚‹ã®ã« 20140417 ã¨ 20140418 ã®å‰ãŒ 20140221 ã¨ 20140222 ã«ãªã£ã¦ã„ã¦
daily ã§ã¯ãªã•ãã†ã«è¦‹ãˆã‚‹ã®ã§ã™ãŒã€
ãƒªãƒªãƒ¼ã‚¹å‰ã¯æ›´æ–°ã‚’æ­¢ã‚ã¦ã„ãŸã ã‘ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> mkdir trusty
</span><span class='line'><span class="gp">%</span> <span class="nb">cd </span>trusty
</span><span class='line'><span class="gp">%</span> vagrant init
</span><span class='line'><span class="go">A `Vagrantfile` has been placed in this directory. You are now</span>
</span><span class='line'><span class="go">ready to `vagrant up` your first virtual environment! Please read</span>
</span><span class='line'><span class="go">the comments in the Vagrantfile as well as documentation on</span>
</span><span class='line'><span class="go">`vagrantup.com` for more information on using Vagrant.</span>
</span><span class='line'><span class="gp">%</span> vi Vagrantfile
</span><span class='line'><span class="go">(config.vm.box ã¨ config.vm.box_url ã‚’è¨­å®š)</span>
</span><span class='line'><span class="gp">%</span> egrep <span class="s1">&#39;^ *[^ #]&#39;</span> Vagrantfile
</span><span class='line'><span class="go">VAGRANTFILE_API_VERSION = &quot;2&quot;</span>
</span><span class='line'><span class="go">Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|</span>
</span><span class='line'><span class="go">  config.vm.box = &quot;trusty-amd64-20140418&quot;</span>
</span><span class='line'><span class="go">  config.vm.box_url = &quot;https://cloud-images.ubuntu.com/vagrant/trusty/20140418/trusty-server-cloudimg-amd64-vagrant-disk1.box&quot;</span>
</span><span class='line'><span class="go">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã®æ®µéšã§ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã™ã‚Œã°å…ƒã«æˆ»ã›ã¾ã™ã€‚</p>

<h2>box ã®è¿½åŠ ã¨èµ·å‹•</h2>

<p>åˆå›ã® <code>vagrant up</code> ã¯ box ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚‚ã™ã‚‹ã®ã§
æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">%</span> vagrant up
</span><span class='line'><span class="go">Bringing machine &#39;default&#39; up with &#39;virtualbox&#39; provider...</span>
</span><span class='line'><span class="go">==&gt; default: Box &#39;trusty-amd64-20140418&#39; could not be found. Attempting to find and install...</span>
</span><span class='line'><span class="go">    default: Box Provider: virtualbox</span>
</span><span class='line'><span class="go">    default: Box Version: &gt;= 0</span>
</span><span class='line'><span class="go">==&gt; default: Adding box &#39;trusty-amd64-20140418&#39; (v0) for provider: virtualbox</span>
</span><span class='line'><span class="go">    default: Downloading: https://cloud-images.ubuntu.com/vagrant/trusty/20140418/trusty-server-cloudimg-amd64-vagrant-disk1.box</span>
</span><span class='line'><span class="go">==&gt; default: Box download is resuming from prior download progress</span>
</span><span class='line'><span class="go">==&gt; default: Successfully added box &#39;trusty-amd64-20140418&#39; (v0) for &#39;virtualbox&#39;!</span>
</span><span class='line'><span class="go">==&gt; default: Importing base box &#39;trusty-amd64-20140418&#39;...</span>
</span><span class='line'><span class="go">==&gt; default: Matching MAC address for NAT networking...</span>
</span><span class='line'><span class="go">==&gt; default: Setting the name of the VM: trusty_default_1397790655665_45006</span>
</span><span class='line'><span class="go">==&gt; default: Clearing any previously set forwarded ports...</span>
</span><span class='line'><span class="go">==&gt; default: Fixed port collision for 22 =&gt; 2222. Now on port 2200.</span>
</span><span class='line'><span class="go">==&gt; default: Clearing any previously set network interfaces...</span>
</span><span class='line'><span class="go">==&gt; default: Preparing network interfaces based on configuration...</span>
</span><span class='line'><span class="go">    default: Adapter 1: nat</span>
</span><span class='line'><span class="go">==&gt; default: Forwarding ports...</span>
</span><span class='line'><span class="go">    default: 22 =&gt; 2200 (adapter 1)</span>
</span><span class='line'><span class="go">==&gt; default: Booting VM...</span>
</span><span class='line'><span class="go">==&gt; default: Waiting for machine to boot. This may take a few minutes...</span>
</span><span class='line'><span class="go">    default: SSH address: 127.0.0.1:2200</span>
</span><span class='line'><span class="go">    default: SSH username: vagrant</span>
</span><span class='line'><span class="go">    default: SSH auth method: private key</span>
</span><span class='line'><span class="go">    default: Warning: Connection timeout. Retrying...</span>
</span><span class='line'><span class="go">    default: Warning: Remote connection disconnect. Retrying...</span>
</span><span class='line'><span class="go">==&gt; default: Machine booted and ready!</span>
</span><span class='line'><span class="go">GuestAdditions 4.3.10 running --- OK.</span>
</span><span class='line'><span class="go">==&gt; default: Checking for guest additions in VM...</span>
</span><span class='line'><span class="go">==&gt; default: Mounting shared folders...</span>
</span><span class='line'><span class="go">    default: /vagrant =&gt; /path/to/trusty</span>
</span></code></pre></td></tr></table></div></figure>


<p>ã“ã®æ®µéšã§ã¯ vagrant box ãŒè¿½åŠ ã•ã‚Œã¦ VM ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã®ã§ã€
å…ƒã«æˆ»ã™ã«ã¯ <code>vagrant destroy</code> ã§ VM ã‚’å‰Šé™¤ã—ã¦ã€
<code>vagrant box remove boxå</code> ã§ box ã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p>

<p>æ™®é€šã¯ <code>vagrant destroy</code> ã§ VM ã‚’ç ´æ£„ã™ã‚‹ã ã‘ã§
box ã¯ä½¿ã„å›ã™ã¨æ€ã„ã¾ã™ã€‚</p>

<p>box ã‚’å…ˆã«å‰Šé™¤ã—ã¦ã—ã¾ã†ã¨ VM ã®å‰Šé™¤ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚ˆã†ãªã®ã§ã€
ãã®å ´åˆã¯ GUI ã‹ã‚‰ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ãƒ‡ã‚£ã‚¹ã‚¯ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ãªã©
ãŒã‚“ã°ã£ã¦å‰Šé™¤ã—ã¾ã™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[OpenSSL/GnuTLS ã§ã® CSR ã®ä½œã‚Šæ–¹]]></title>
    <link href="http://blog.n-z.jp/blog/2014-04-16-new-csr.html"/>
    <updated>2014-04-16T10:09:24+09:00</updated>
    <id>http://blog.n-z.jp/blog/new-csr</id>
    <content type="html"><![CDATA[<p>ã‚µãƒ¼ãƒãƒ¼è¨¼æ˜æ›¸ã‚’ç™ºè¡Œã—ã¦ã‚‚ã‚‰ã†æ™‚ãªã©ã«æ¯å›èª¿ã¹ã¤ã¤ CSR ã‚’ä½œæˆã—ã¦ã„ã‚‹ã®ã§ã€
GnuTLS ã¨ OpenSSL ã‚’ä½¿ã£ãŸæ–¹æ³•ã‚’ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚</p>

<!--more-->


<h2>ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p>OpenSSL ã®æ–¹ã¯å…¥ã£ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ãŒã€å…¥ã£ã¦ã„ãªã‘ã‚Œã° <code>openssl</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã„ã‚Œã¦ãŠãã¾ã™ã€‚</p>

<p>GnuTLS ã®æ–¹ã¯ Debian ã‚„ Ubuntu ã®å ´åˆã¯ <code>gnutls-bin</code> ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã« <code>gnutls-cli</code> ã‚³ãƒãƒ³ãƒ‰ãªã©ãŒå…¥ã£ã¦ã„ã¾ã™ã€‚
RHEL ãªã©ã§ã¯ <code>gnutls-utils</code> ã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å…¥ã£ã¦ã„ã‚‹ã‚‰ã—ã„ã§ã™ã€‚</p>

<h2>certtool ã‚³ãƒãƒ³ãƒ‰</h2>

<p><code>certtool</code> ã‚³ãƒãƒ³ãƒ‰ã¯ Mac OS X ã«ã‚‚ã‚ã‚Šã¾ã™ãŒã€ GnuTLS ã®ã‚‚ã®ã¨ã¯åˆ¥ç‰©ã§ã™ã€‚
ã“ã“ã§èª¬æ˜ã—ã¦ã„ã‚‹ã®ã¯ GnuTLS ã® <code>certtool</code> ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚</p>

<h2>ç§˜å¯†éµä½œæˆ</h2>

<p>ç§˜å¯†éµã®ç”Ÿæˆã¯ãƒ©ãƒ³ãƒ€ãƒ ãªæƒ…å ±ã‚’å…ƒã«ç”Ÿæˆã™ã‚‹ã®ã§ã€ãƒ“ãƒƒãƒˆæ•°ã‚„ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã®é‡ã«å¿œã˜ã¦æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚
ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚·ãƒ³ãªã©ã§ã¯ãƒã‚¦ã‚¹ã‚’å‹•ã‹ã™ãªã©ã®æ–¹æ³•ã§ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã‚’å¢—ã‚„ã™ã“ã¨ãŒå‡ºæ¥ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>

<p>ä½œæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãªã©ã‚’è€ƒãˆã‚‹ã¨æš—å·åŒ–ã—ãªã„ãªã‚‰ GnuTLS ã®
<code>certtool --generate-privkey --bits 4096 --outfile example.key</code>
ã®æ–¹æ³•ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p>

<h3>GnuTLS</h3>

<p>GnuTLS ã® <code>certtool</code> ã‚³ãƒãƒ³ãƒ‰ã§ã¯ <code>--generate-privkey</code> ã§ç§˜å¯†éµã‚’ä½œæˆã§ãã¾ã™ã€‚
<code>--bits</code> ã§éµã®ãƒ“ãƒƒãƒˆæ•°ã‚’æŒ‡å®šã—ãªã„ã¨ squeeze ã ã¨ 2048 ãƒ“ãƒƒãƒˆã€ precise ã‚„ wheezy ã ã¨ 2432 ãƒ“ãƒƒãƒˆã«ãªã‚Šã¾ã—ãŸã€‚
ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚‚ <code>-rw-------</code> (600) ã§ä½œæˆã•ã‚Œã‚‹ã®ã§ã€ãã®ã¾ã¾ä½¿ãˆã¾ã™ã€‚</p>

<figure class='code'><figcaption><span>gnutls</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> certtool --generate-privkey --outfile example-tls.key
</span><span class='line'><span class="go">Generating a 2432 bit RSA private key...</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>gnutls</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> certtool --generate-privkey --bits 4096 --outfile example-tls.key
</span><span class='line'><span class="go">Generating a 4096 bit RSA private key...</span>
</span></code></pre></td></tr></table></div></figure>


<h3>OpenSSL</h3>

<p>OpenSSL ã§ã¯ <code>genrsa</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã§ç”Ÿæˆã—ã¾ã™ã€‚
OpenSSL 1.0.0 ã§ã¯ <code>genpkey</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€
<code>genrsa</code> ã‚‚ã¾ã ä½¿ãˆã‚‹ã®ã§ã€ä»¥ä¸‹ã¯ <code>genrsa</code> ã ã‘æ›¸ã„ã¦ã„ã¾ã™ã€‚</p>

<p>ãƒ“ãƒƒãƒˆæ•°ã‚’æŒ‡å®šã—ãªã„ã¨ squeeze ã ã¨ 1024 ãƒ“ãƒƒãƒˆã€ precise ã‚„ wheezy ã ã¨ 512 ãƒ“ãƒƒãƒˆã«ãªã‚Šã¾ã—ãŸã€‚
ã¾ãŸã€ãã®ã¾ã¾ã ã¨ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒ <code>-rw-rw-r--</code> (664) ã§ç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã€ã‚ã‚‰ã‹ã˜ã‚ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’è¨­å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¦ãŠã„ã¦ä¸Šæ›¸ãã•ã›ã‚‹ã‹ã€ã™ãã« <code>chmod</code> ã§å¤‰æ›´ã—ã¦ãŠã„ãŸæ–¹ãŒè‰¯ã•ãã†ã§ã™ã€‚</p>

<figure class='code'><figcaption><span>openssl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> touch example-ssl.key
</span><span class='line'><span class="gp">$</span> chmod 600 example-ssl.key
</span><span class='line'><span class="gp">$</span> openssl genrsa -out example-ssl.key
</span><span class='line'><span class="go">Generating RSA private key, 512 bit long modulus</span>
</span><span class='line'><span class="go">....++++++++++++</span>
</span><span class='line'><span class="go">.........................++++++++++++</span>
</span><span class='line'><span class="go">e is 65537 (0x10001)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>openssl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> touch example-ssl.key
</span><span class='line'><span class="gp">$</span> chmod 600 example-ssl.key
</span><span class='line'><span class="gp">$</span> openssl genrsa -out example-ssl.key 4096
</span><span class='line'><span class="go">Generating RSA private key, 4096 bit long modulus</span>
</span><span class='line'><span class="go">......................................................++</span>
</span><span class='line'><span class="go">...........++</span>
</span><span class='line'><span class="go">e is 65537 (0x10001)</span>
</span></code></pre></td></tr></table></div></figure>


<p>ãƒãƒƒãƒˆä¸Šè¦‹ã¤ã‹ã‚‹æƒ…å ±ã§ã¯ <code>-des3</code> ãªã©ã§ç”Ÿæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€åº¦æš—å·åŒ–ã—ã¦ã€
ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•æ™‚ã«ä¸è¦ã«ãªã‚‹ã‚ˆã†ã«ã™ãã«å¤–ã™ã‚ˆã†ãªä¾‹ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€
ãã‚“ãªã“ã¨ã‚’ã™ã‚‹ãã‚‰ã„ãªã‚‰æœ€åˆã‹ã‚‰æš—å·åŒ–ã›ãšã«ç”Ÿæˆã™ã‚Œã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚</p>

<p>æš—å·åŒ–ã—ãŸçŠ¶æ…‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ¥é€”ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ãªã©ã®ç›®çš„ãŒã‚ã‚‹ã®ãªã‚‰ã€
æ„å‘³ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€
æš—å·åŒ–ã—ãŸçŠ¶æ…‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ®‹ã•ãªã„ã®ãªã‚‰å˜ãªã‚‹ç„¡é§„ã ã¨æ€ã„ã¾ã™ã€‚</p>

<h2>ç§˜å¯†éµã®å†…å®¹ç¢ºèª</h2>

<p>ç§˜å¯†éµã®å†…å®¹ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã¯ã‚ã¾ã‚Šãªã„ã¨æ€ã„ã¾ã™ãŒã€
<code>openssl rsa -in example.key -text -noout</code>
ã®æ–¹æ³•ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã™ã€‚</p>

<h3>OpenSSL</h3>

<p>OpenSSL ã§ç§˜å¯†éµã®å†…å®¹ã‚’ç¢ºèªã™ã‚‹ã«ã¯ <code>rsa</code> ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚
<code>-text</code> ã§å†…å®¹å…¨ä½“ã®è¡¨ç¤ºã§ <code>-noout</code> ã¯ <code>-----BEGIN RSA PRIVATE KEY-----</code> ã‹ã‚‰ <code>-----END RSA PRIVATE KEY-----</code> ã‚’è¡¨ç¤ºã—ãªã„ã¨ã„ã†æ„å‘³ã§ã™ã€‚
ç§˜å¯†éµæœ¬ä½“ã®å‰ã«ãƒ†ã‚­ã‚¹ãƒˆã®èª¬æ˜ãŒã¤ã„ãŸã‚‚ã®ã‚‚å…ƒã®ç§˜å¯†éµã¨åŒæ§˜ã«æ‰±ãˆã‚‹ã‚ˆã†ãªã®ã§ã€
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯å…ƒã®å†…å®¹ã‚‚å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚</p>

<figure class='code'><figcaption><span>openssl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> openssl rsa -in example-ssl.key -text -noout
</span><span class='line'><span class="go">Private-Key: (4096 bit)</span>
</span><span class='line'><span class="go">modulus:</span>
</span><span class='line'><span class="go">    00:cb:35:ec:f6:00:5a:75:d7:55:14:f8:55:91:1a:</span>
</span><span class='line'><span class="go"> (ç•¥)</span>
</span><span class='line'><span class="go">publicExponent: 65537 (0x10001)</span>
</span><span class='line'><span class="go">privateExponent:</span>
</span><span class='line'><span class="go">    4d:86:de:47:a0:2c:e2:e6:6b:2c:5b:ed:f1:35:10:</span>
</span><span class='line'><span class="go"> (ç•¥)</span>
</span><span class='line'><span class="go">prime1:</span>
</span><span class='line'><span class="go">    00:ef:49:b3:f8:4c:1e:a9:13:a9:fb:86:7e:80:7a:</span>
</span><span class='line'><span class="go"> (ç•¥)</span>
</span><span class='line'><span class="go">prime2:</span>
</span><span class='line'><span class="go">    00:d9:67:2f:e1:4c:13:78:fa:dd:2b:7a:3e:f5:68:</span>
</span><span class='line'><span class="go"> (ç•¥)</span>
</span><span class='line'><span class="go">exponent1:</span>
</span><span class='line'><span class="go">    00:ba:18:ee:ff:a7:6b:9d:01:2f:0c:f0:0f:88:29:</span>
</span><span class='line'><span class="go"> (ç•¥)</span>
</span><span class='line'><span class="go">exponent2:</span>
</span><span class='line'><span class="go">    52:93:94:27:32:5b:4f:1f:92:74:9a:39:61:c3:ae:</span>
</span><span class='line'><span class="go"> (ç•¥)</span>
</span><span class='line'><span class="go">coefficient:</span>
</span><span class='line'><span class="go">    44:e9:a2:de:87:e7:2d:f0:57:58:d6:fc:85:20:df:</span>
</span><span class='line'><span class="go"> (ç•¥)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>GnuTLS</h3>

<p>GnuTLS ã® <code>certtool</code> ã§ç§˜å¯†éµã®å†…å®¹ã‚’ç¢ºèªã™ã‚‹ã«ã¯ <code>-k</code> (<code>--key-info</code>) ã‚’ä½¿ã„ã¾ã™ã€‚
<code>openssl</code> ã® <code>-noout</code> ç›¸å½“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚</p>

<figure class='code'><figcaption><span>gnutls</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> certtool -k --infile example-tls.key
</span><span class='line'><span class="go">Public Key Info:</span>
</span><span class='line'><span class="go">        Public Key Algorithm: RSA</span>
</span><span class='line'><span class="go">        Key Security Level: High</span>
</span><span class='line'><span class="go">modulus:</span>
</span><span class='line'><span class="go">        00:da:45:da:ca:13:ac:59:43:55:87:68:04:16:1a:</span>
</span><span class='line'><span class="go">     (ç•¥)</span>
</span><span class='line'><span class="go">public exponent:</span>
</span><span class='line'><span class="go">        01:00:01:</span>
</span><span class='line'><span class="go">private exponent:</span>
</span><span class='line'><span class="go">        3c:5b:18:96:cc:3d:da:28:fe:5b:84:ed:ac:56:e2:</span>
</span><span class='line'><span class="go">     (ç•¥)</span>
</span><span class='line'><span class="go">prime1:</span>
</span><span class='line'><span class="go">        00:dc:f3:92:13:d5:c7:cf:bc:9f:76:b3:f6:a2:60:</span>
</span><span class='line'><span class="go">     (ç•¥)</span>
</span><span class='line'><span class="go">prime2:</span>
</span><span class='line'><span class="go">        00:fc:e5:83:0e:2e:d4:a1:be:37:bf:05:6e:c3:d3:</span>
</span><span class='line'><span class="go">     (ç•¥)</span>
</span><span class='line'><span class="go">coefficient:</span>
</span><span class='line'><span class="go">        63:74:e3:95:9e:d6:6c:7d:d9:2d:ad:45:f8:0b:1a:</span>
</span><span class='line'><span class="go">     (ç•¥)</span>
</span><span class='line'><span class="go">exp1:</span>
</span><span class='line'><span class="go">        00:a1:1d:a7:9e:79:1c:2b:da:42:79:bf:7f:10:26:</span>
</span><span class='line'><span class="go">     (ç•¥)</span>
</span><span class='line'><span class="go">exp2:</span>
</span><span class='line'><span class="go">        00:b3:be:9c:ab:53:f5:a5:10:01:a7:2f:41:4e:c5:</span>
</span><span class='line'><span class="go">     (ç•¥)</span>
</span><span class='line'><span class="go">        c4:31:</span>
</span><span class='line'>
</span><span class='line'><span class="go">Public Key ID: 45:44:BC:C4:BB:95:24:97:5D:C2:95:BF:27:95:02:2C:50:09:9E:35</span>
</span><span class='line'>
</span><span class='line'><span class="go">-----BEGIN RSA PRIVATE KEY-----</span>
</span><span class='line'><span class="go">(ç•¥)</span>
</span><span class='line'><span class="go">-----END RSA PRIVATE KEY-----</span>
</span></code></pre></td></tr></table></div></figure>


<h2>CSR ä½œæˆã¨å†…å®¹ç¢ºèª</h2>

<p>OpenSSL ã¯ <code>openssl req</code> ã§ä½œæˆã‚‚å†…å®¹ã®ç¢ºèªã‚‚å‡ºæ¥ã¾ã™ã€‚
GnuTLS ã® <code>certtool</code> ã¯ <code>-q</code> (<code>--generate-request</code>) ã§ä½œæˆã—ã¦
<code>--crq-info</code> ã§å†…å®¹ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>

<p>ä»¥ä¸‹ã®ä¾‹ã§ã¯ãã‚Œãã‚Œã§ä½œæˆã—ã¦ã€ä¸¡æ–¹ã§å†…å®¹ã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã€‚</p>

<h3>OpenSSL</h3>

<p>OpenSSL ã§ã¯ <code>C</code> ã¨ <code>ST</code> ã¨ <code>O</code> ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒå…¥ã£ã¦ã„ã¦ã€
å¯¾è©±çš„ã«ä½œæˆã—ã¤ã¤ç©ºæ¬„ã«ã—ãŸã„æ™‚ã¯
åˆ¥é€” <code>openssl.cnf</code> ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚</p>

<figure class='code'><figcaption><span>openssl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> openssl req -new -key example-ssl.key -out example-ssl.csr
</span><span class='line'><span class="go">You are about to be asked to enter information that will be incorporated</span>
</span><span class='line'><span class="go">into your certificate request.</span>
</span><span class='line'><span class="go">What you are about to enter is what is called a Distinguished Name or a DN.</span>
</span><span class='line'><span class="go">There are quite a few fields but you can leave some blank</span>
</span><span class='line'><span class="go">For some fields there will be a default value,</span>
</span><span class='line'><span class="go">If you enter &#39;.&#39;, the field will be left blank.</span>
</span><span class='line'><span class="go">-----</span>
</span><span class='line'><span class="go">Country Name (2 letter code) [AU]:JP</span>
</span><span class='line'><span class="go">State or Province Name (full name) [Some-State]:Osaka</span>
</span><span class='line'><span class="go">Locality Name (eg, city) []:</span>
</span><span class='line'><span class="go">Organization Name (eg, company) [Internet Widgits Pty Ltd]:</span>
</span><span class='line'><span class="go">Organizational Unit Name (eg, section) []:</span>
</span><span class='line'><span class="go">Common Name (e.g. server FQDN or YOUR name) []:ssl.example.jp</span>
</span><span class='line'><span class="go">Email Address []:</span>
</span><span class='line'>
</span><span class='line'><span class="go">Please enter the following &#39;extra&#39; attributes</span>
</span><span class='line'><span class="go">to be sent with your certificate request</span>
</span><span class='line'><span class="go">A challenge password []:</span>
</span><span class='line'><span class="go">An optional company name []:</span>
</span><span class='line'><span class="gp">$</span> openssl req -in example-ssl.csr -text -noout
</span><span class='line'><span class="go">Certificate Request:</span>
</span><span class='line'><span class="go">    Data:</span>
</span><span class='line'><span class="go">        Version: 0 (0x0)</span>
</span><span class='line'><span class="go">        Subject: C=JP, ST=Osaka, O=Internet Widgits Pty Ltd, CN=ssl.example.jp</span>
</span><span class='line'><span class="go">        Subject Public Key Info:</span>
</span><span class='line'><span class="go">            Public Key Algorithm: rsaEncryption</span>
</span><span class='line'><span class="go">                Public-Key: (4096 bit)</span>
</span><span class='line'><span class="go">                Modulus:</span>
</span><span class='line'><span class="go">                    00:cb:35:ec:f6:00:5a:75:d7:55:14:f8:55:91:1a:</span>
</span><span class='line'><span class="go">                 (ç•¥)</span>
</span><span class='line'><span class="go">                Exponent: 65537 (0x10001)</span>
</span><span class='line'><span class="go">        Attributes:</span>
</span><span class='line'><span class="go">            a0:00</span>
</span><span class='line'><span class="go">    Signature Algorithm: sha1WithRSAEncryption</span>
</span><span class='line'><span class="go">         4f:1a:a7:57:9f:88:f3:17:23:aa:51:12:11:ff:c0:24:31:4c:</span>
</span><span class='line'><span class="go">      (ç•¥)</span>
</span><span class='line'><span class="gp">$</span> certtool --crq-info --infile example-ssl.csr
</span><span class='line'><span class="go">PKCS #10 Certificate Request Information:</span>
</span><span class='line'><span class="go">        Version: 1</span>
</span><span class='line'><span class="go">        Subject: C=JP,ST=Osaka,O=Internet Widgits Pty Ltd,CN=ssl.example.jp</span>
</span><span class='line'><span class="go">        Subject Public Key Algorithm: RSA</span>
</span><span class='line'><span class="go">                Modulus (bits 4096):</span>
</span><span class='line'><span class="go">                        cb:35:ec:f6:00:5a:75:d7:55:14:f8:55:91:1a:9b:83</span>
</span><span class='line'><span class="go">                     (ç•¥)</span>
</span><span class='line'><span class="go">                Exponent:</span>
</span><span class='line'><span class="go">                        01:00:01</span>
</span><span class='line'><span class="go">Other Information:</span>
</span><span class='line'><span class="go">        Public Key Id:</span>
</span><span class='line'><span class="go">                c14459bdb79e6b71e6303e4ffd9c7ab43dc9b9df</span>
</span><span class='line'>
</span><span class='line'><span class="go">-----BEGIN NEW CERTIFICATE REQUEST-----</span>
</span><span class='line'><span class="go">(ç•¥)</span>
</span><span class='line'><span class="go">-----END NEW CERTIFICATE REQUEST-----</span>
</span></code></pre></td></tr></table></div></figure>


<h3>GnuTLS</h3>

<p>GnuTLS ã§ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãŠã„ã¦ <code>--template</code> ã§æŒ‡å®šã™ã‚‹æ–¹æ³•ãŒå¤šã„ã‚ˆã†ã§ã™ãŒã€
å¯¾è©±çš„ã«ã‚‚ä½œæˆã§ãã¾ã—ãŸã€‚
<code>Subject</code> ã‚’ <code>CN</code> ã ã‘ã«ã™ã‚‹ã®ã¯ OpenSSL ã‚ˆã‚Šç°¡å˜ã«å‡ºæ¥ãŸã®ã§ã™ãŒã€
<code>Requested Extensions</code> ãŒè¨­å®šã•ã‚Œã‚‹ã‚ˆã†ãªã®ã§ã€
ä¸è¦ãªå ´åˆã«ã¯å›°ã‚Šãã†ã§ã™ã€‚</p>

<figure class='code'><figcaption><span>gnutls</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> certtool -q --load-privkey example-tls.key --outfile example-tls.csr
</span><span class='line'><span class="go">Generating a PKCS #10 certificate request...</span>
</span><span class='line'><span class="go">Country name (2 chars):</span>
</span><span class='line'><span class="go">Organization name:</span>
</span><span class='line'><span class="go">Organizational unit name:</span>
</span><span class='line'><span class="go">Locality name:</span>
</span><span class='line'><span class="go">State or province name:</span>
</span><span class='line'><span class="go">Common name: tls.example.jp</span>
</span><span class='line'><span class="go">UID:</span>
</span><span class='line'><span class="go">Enter a dnsName of the subject of the certificate:</span>
</span><span class='line'><span class="go">Enter the IP address of the subject of the certificate:</span>
</span><span class='line'><span class="go">Enter the e-mail of the subject of the certificate:</span>
</span><span class='line'><span class="go">Enter a challenge password:</span>
</span><span class='line'><span class="go">Does the certificate belong to an authority? (y/N):</span>
</span><span class='line'><span class="go">Will the certificate be used for signing (DHE and RSA-EXPORT ciphersuites)? (y/N):</span>
</span><span class='line'><span class="go">Will the certificate be used for encryption (RSA ciphersuites)? (y/N):</span>
</span><span class='line'><span class="go">Is this a TLS web client certificate? (y/N):</span>
</span><span class='line'><span class="go">Is this also a TLS web server certificate? (y/N):</span>
</span><span class='line'><span class="gp">$</span> openssl req -in example-tls.csr -text -noout
</span><span class='line'><span class="go">Certificate Request:</span>
</span><span class='line'><span class="go">    Data:</span>
</span><span class='line'><span class="go">        Version: 0 (0x0)</span>
</span><span class='line'><span class="go">        Subject: CN=tls.example.jp</span>
</span><span class='line'><span class="go">        Subject Public Key Info:</span>
</span><span class='line'><span class="go">            Public Key Algorithm: rsaEncryption</span>
</span><span class='line'><span class="go">                Public-Key: (4096 bit)</span>
</span><span class='line'><span class="go">                Modulus:</span>
</span><span class='line'><span class="go">                    00:da:45:da:ca:13:ac:59:43:55:87:68:04:16:1a:</span>
</span><span class='line'><span class="go">                 (ç•¥)</span>
</span><span class='line'><span class="go">                Exponent: 65537 (0x10001)</span>
</span><span class='line'><span class="go">        Attributes:</span>
</span><span class='line'><span class="go">        Requested Extensions:</span>
</span><span class='line'><span class="go">            X509v3 Basic Constraints: critical</span>
</span><span class='line'><span class="go">                CA:FALSE</span>
</span><span class='line'><span class="go">            X509v3 Key Usage: critical</span>
</span><span class='line'><span class="go">                Digital Signature</span>
</span><span class='line'><span class="go">    Signature Algorithm: sha1WithRSAEncryption</span>
</span><span class='line'><span class="go">         cb:71:d2:c9:a2:97:14:74:f0:63:69:6b:36:31:ff:ce:f2:a0:</span>
</span><span class='line'><span class="go">      (ç•¥)</span>
</span><span class='line'><span class="gp">$</span> certtool --crq-info --infile example-tls.csr
</span><span class='line'><span class="go">PKCS #10 Certificate Request Information:</span>
</span><span class='line'><span class="go">        Version: 1</span>
</span><span class='line'><span class="go">        Subject: CN=tls.example.jp</span>
</span><span class='line'><span class="go">        Subject Public Key Algorithm: RSA</span>
</span><span class='line'><span class="go">                Modulus (bits 4096):</span>
</span><span class='line'><span class="go">                        da:45:da:ca:13:ac:59:43:55:87:68:04:16:1a:09:41</span>
</span><span class='line'><span class="go">                     (ç•¥)</span>
</span><span class='line'><span class="go">                Exponent:</span>
</span><span class='line'><span class="go">                        01:00:01</span>
</span><span class='line'><span class="go">        Attributes:</span>
</span><span class='line'><span class="go">                Extensions:</span>
</span><span class='line'><span class="go">                        Basic Constraints (critical):</span>
</span><span class='line'><span class="go">                                Certificate Authority (CA): FALSE</span>
</span><span class='line'><span class="go">                        Key Usage (critical):</span>
</span><span class='line'><span class="go">                                Digital signature.</span>
</span><span class='line'><span class="go">Other Information:</span>
</span><span class='line'><span class="go">        Public Key Id:</span>
</span><span class='line'><span class="go">                4544bcc4bb9524975dc295bf2795022c50099e35</span>
</span><span class='line'>
</span><span class='line'><span class="go">-----BEGIN NEW CERTIFICATE REQUEST-----</span>
</span><span class='line'><span class="go">(ç•¥)</span>
</span><span class='line'><span class="go">-----END NEW CERTIFICATE REQUEST-----</span>
</span></code></pre></td></tr></table></div></figure>


<h2>ã¾ã¨ã‚ã¦ä½œæˆ</h2>

<p>CSR ã®ç”Ÿæˆã®æ™‚ã«ç§˜å¯†éµã‚’æŒ‡å®šã—ãªã„ã¨ã€
CSR ã¨ä¸€ç·’ã«ç§˜å¯†éµã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã§ã™ã€‚</p>

<h3>OpenSSL</h3>

<p><code>openssl req -new</code> ã§ <code>-key</code> ã®ä»£ã‚ã‚Šã« <code>-newkey</code> ãªã©ã‚’æŒ‡å®šã™ã‚‹ã¨ CSR ã¨ä¸€ç·’ã«ç§˜å¯†éµã‚‚ç”Ÿæˆã§ãã¾ã™ã€‚
ã“ã®å ´åˆã‚‚ãã®ã¾ã¾ã ã¨ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒ <code>-rw-rw-r--</code> (664) ã«ãªã‚‹ã‚ˆã†ãªã®ã§ã€æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
<code>-nodes</code> ã‚’ä»˜ã‘ãªã„ã¨æš—å·åŒ–ã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’è¦æ±‚ã•ã‚Œã¾ã™ã€‚</p>

<figure class='code'><figcaption><span>openssl</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> openssl req -new -newkey rsa:4096 -nodes -keyout server.key -out server.csr
</span><span class='line'><span class="go">Generating a 4096 bit RSA private key</span>
</span><span class='line'><span class="go">.............................................................................................................................................................................................................................................................................................................................................++</span>
</span><span class='line'><span class="go">......++</span>
</span><span class='line'><span class="go">writing new private key to &#39;server.key&#39;</span>
</span><span class='line'><span class="go">-----</span>
</span><span class='line'><span class="go">You are about to be asked to enter information that will be incorporated</span>
</span><span class='line'><span class="go">into your certificate request.</span>
</span><span class='line'><span class="go">What you are about to enter is what is called a Distinguished Name or a DN.</span>
</span><span class='line'><span class="go">There are quite a few fields but you can leave some blank</span>
</span><span class='line'><span class="go">For some fields there will be a default value,</span>
</span><span class='line'><span class="go">If you enter &#39;.&#39;, the field will be left blank.</span>
</span><span class='line'><span class="go">-----</span>
</span><span class='line'><span class="go">Country Name (2 letter code) [AU]:JP</span>
</span><span class='line'><span class="go">State or Province Name (full name) [Some-State]:Osaka</span>
</span><span class='line'><span class="go">Locality Name (eg, city) []:</span>
</span><span class='line'><span class="go">Organization Name (eg, company) [Internet Widgits Pty Ltd]:</span>
</span><span class='line'><span class="go">Organizational Unit Name (eg, section) []:</span>
</span><span class='line'><span class="go">Common Name (e.g. server FQDN or YOUR name) []:ssl.example.jp</span>
</span><span class='line'><span class="go">Email Address []:</span>
</span><span class='line'>
</span><span class='line'><span class="go">Please enter the following &#39;extra&#39; attributes</span>
</span><span class='line'><span class="go">to be sent with your certificate request</span>
</span><span class='line'><span class="go">A challenge password []:</span>
</span><span class='line'><span class="go">An optional company name []:</span>
</span></code></pre></td></tr></table></div></figure>


<h3>GnuTLS</h3>

<p><code>certtool -q</code> ã§ <code>--load-privkey</code> ã‚’æŒ‡å®šã—ãªã„ã¨ç§˜å¯†éµã‚‚ä¸€ç·’ã«ç”Ÿæˆã™ã‚‹ã‚ˆã†ã§ã™ã€‚
å‡ºåŠ›ã¯ <code>--outfile</code> ã§æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦å…¥ã£ã¦ã—ã¾ã£ã¦ã€
ä½¿ã„å‹æ‰‹ã¯è‰¯ããªã„ã®ã§ã€å€‹åˆ¥ã«ç”Ÿæˆã—ãŸæ–¹ãŒè‰¯ã•ãã†ã§ã™ã€‚</p>

<figure class='code'><figcaption><span>gnutls</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='console'><span class='line'><span class="gp">$</span> certtool -q --outfile out.txt
</span><span class='line'><span class="go">Generating a PKCS #10 certificate request...</span>
</span><span class='line'><span class="go">Generating a 2432 bit RSA private key...</span>
</span><span class='line'><span class="go">Country name (2 chars):</span>
</span><span class='line'><span class="go">Organization name:</span>
</span><span class='line'><span class="go">Organizational unit name:</span>
</span><span class='line'><span class="go">Locality name:</span>
</span><span class='line'><span class="go">State or province name:</span>
</span><span class='line'><span class="go">Common name: tls.example.jp</span>
</span><span class='line'><span class="go">UID:</span>
</span><span class='line'><span class="go">Enter a dnsName of the subject of the certificate:</span>
</span><span class='line'><span class="go">Enter the IP address of the subject of the certificate:</span>
</span><span class='line'><span class="go">Enter the e-mail of the subject of the certificate:</span>
</span><span class='line'><span class="go">Enter a challenge password:</span>
</span><span class='line'><span class="go">Does the certificate belong to an authority? (y/N):</span>
</span><span class='line'><span class="go">Will the certificate be used for signing (DHE and RSA-EXPORT ciphersuites)? (y/N):</span>
</span><span class='line'><span class="go">Will the certificate be used for encryption (RSA ciphersuites)? (y/N):</span>
</span><span class='line'><span class="go">Is this a TLS web client certificate? (y/N):</span>
</span><span class='line'><span class="go">Is this also a TLS web server certificate? (y/N):</span>
</span><span class='line'><span class="gp">$</span> cat out.txt
</span><span class='line'><span class="go">-----BEGIN RSA PRIVATE KEY-----</span>
</span><span class='line'><span class="go">(ç•¥)</span>
</span><span class='line'><span class="go">-----END RSA PRIVATE KEY-----</span>
</span><span class='line'><span class="go">PKCS #10 Certificate Request Information:</span>
</span><span class='line'><span class="go">        Version: 1</span>
</span><span class='line'><span class="go">        Subject: CN=tls.example.jp</span>
</span><span class='line'><span class="go">        Subject Public Key Algorithm: RSA</span>
</span><span class='line'><span class="go">                Modulus (bits 2432):</span>
</span><span class='line'><span class="go">                        f4:ff:66:e8:c6:19:ab:7b:39:e3:72:ff:ee:13:fa:cf</span>
</span><span class='line'><span class="go">                     (ç•¥)</span>
</span><span class='line'><span class="go">                Exponent:</span>
</span><span class='line'><span class="go">                        01:00:01</span>
</span><span class='line'><span class="go">        Attributes:</span>
</span><span class='line'><span class="go">                Extensions:</span>
</span><span class='line'><span class="go">                        Basic Constraints (critical):</span>
</span><span class='line'><span class="go">                                Certificate Authority (CA): FALSE</span>
</span><span class='line'><span class="go">                        Key Usage (critical):</span>
</span><span class='line'><span class="go">                                Digital signature.</span>
</span><span class='line'><span class="go">Other Information:</span>
</span><span class='line'><span class="go">        Public Key Id:</span>
</span><span class='line'><span class="go">                61c9cef12d691e3373f71ad3a82d1ac4c4b71793</span>
</span><span class='line'>
</span><span class='line'><span class="go">-----BEGIN NEW CERTIFICATE REQUEST-----</span>
</span><span class='line'><span class="go">(ç•¥)</span>
</span><span class='line'><span class="go">-----END NEW CERTIFICATE REQUEST-----</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¬¬3å› ã‚³ãƒ³ãƒ†ãƒŠå‹ä»®æƒ³åŒ–ã®æƒ…å ±äº¤æ›ä¼šï¼ å¤§é˜ª (ã‚³ãƒ³ãƒ†ãƒŠå‹VMã‚„é–¢é€£ã™ã‚‹ã‚«ãƒ¼ãƒãƒ«ç­‰ã®æŠ€è¡“ãŒè©±é¡Œã®å‹‰å¼·ä¼š)ã«å‚åŠ ã—ãŸ]]></title>
    <link href="http://blog.n-z.jp/blog/2014-04-12-lxcjp.html"/>
    <updated>2014-04-12T22:23:56+09:00</updated>
    <id>http://blog.n-z.jp/blog/lxcjp</id>
    <content type="html"><![CDATA[<p><a href="http://atnd.org/events/46446">ç¬¬3å› ã‚³ãƒ³ãƒ†ãƒŠå‹ä»®æƒ³åŒ–ã®æƒ…å ±äº¤æ›ä¼šï¼ å¤§é˜ª (ã‚³ãƒ³ãƒ†ãƒŠå‹VMã‚„é–¢é€£ã™ã‚‹ã‚«ãƒ¼ãƒãƒ«ç­‰ã®æŠ€è¡“ãŒè©±é¡Œã®å‹‰å¼·ä¼š)</a>
ã«å‚åŠ ã—ã¦ãã¾ã—ãŸã€‚</p>

<!--more-->


<h2>å…¨ä½“ã®æ„Ÿæƒ³</h2>

<p>å…¨ä½“çš„ã«ã¯ LXC ã‚„ Docker ã«é™ã‚‰ãšã€
Hyper-V ä¸Šã§ã® FreeBSD jail ã®è©±ã‚„ Vagrant ã‚„ CircleCI (LXC ã‚’ä½¿ã£ã¦ã„ã‚‹) ãªã©ã®è©±ã‚‚ã‚ã£ã¦ã€é¢ç™½ã‹ã£ãŸã§ã™ã€‚</p>

<h2>ä¼šå ´</h2>

<p>ã¡ã‚‡ã£ã¨æ—©ã‚ã«å‡ºç™ºã—ã¦ã€æ¢…ç”°ã‹ã‚‰é›£æ³¢æ©‹ã‚’é€šã£ã¦å ºç­‹ã‚’é€šã£ã¦ä¼šå ´ã¾ã§æ­©ã„ã¦ã„ãã¾ã—ãŸã€‚
å ´æ‰€ã‚‚ã‚ã‹ã‚Šã‚„ã™ãã¦äº¤å·®ç‚¹ã®åå‰ã¨ç›®çš„åœ°ã®ãƒ“ãƒ«ã®åå‰ã‚’ã¡ã‚ƒã‚“ã¨ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚Œã°è¿·ã‚ãšã«ãŸã©ã‚Šç€ã‘ã¾ã—ãŸã€‚</p>

<p>ä¼šå ´ç„¡ç·š LAN ãŒã‚ã£ãŸã®ã§ã™ãŒã€
æœ€åˆã«æ¥ç¶šã—ãŸ MacBook Air ã¯å•é¡Œãªãç¹‹ãŒã£ã¦ã„ãŸã®ã§ã™ãŒã€
å¾Œã‹ã‚‰è¿½åŠ ã§ã¤ãªã”ã†ã¨ã—ãŸ iPod touch ã¯ç„¡ç·š LAN è‡ªä½“ã¯ç¹‹ãŒã£ã¦ã„ã‚‹ã®ã« APIPA ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ãªã£ã¦ã„ã¦ã€
DHCP ã®å‰²ã‚Šå½“ã¦ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒè¶³ã‚Šãªã‹ã£ãŸã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã—ãŸã€‚</p>

<h2>LXC</h2>

<p>ã„ã‚ã„ã‚ã¨çŸ¥ã‚‰ãªã„ã“ã¨ã‚‚å¤šãã¦å‹‰å¼·ã«ãªã£ãŸã®ã§ã™ãŒã€ç‰¹ã« <code>veth</code> ã¨ <code>macvlan</code> ã®é•ã„ãŒã‚ˆãã‚ã‹ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã€
<code>veth</code> ã¯ä½œæˆã—ãŸã ã‘ã ã¨é€šä¿¡ã«ä½¿ãˆãªãã¦ãƒšã‚¢ã®ç‰‡æ–¹ã‚’ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹ã«å…¥ã‚Œãªã„ã¨ä½¿ãˆãªã„ã¨ã„ã†ã‚³ãƒ³ãƒ†ãƒŠç”¨ã®æ©Ÿèƒ½ã§ã€
<code>macvlan</code> ã¯ç‰©ç† NIC ã«åˆ¥ MAC ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä»˜ã‘ã¦ä½¿ã†ã‚‚ã®ã€
ã¨ã„ã†ã®ãŒã‚ã‹ã£ã¦è‰¯ã‹ã£ãŸã§ã™ã€‚</p>

<p>LXC ã¨ã„ã†è¨€è‘‰ãŒã•ã™ã‚‚ã®ãŒã€Œã‚«ãƒ¼ãƒãƒ«ã®ã‚³ãƒ³ãƒ†ãƒŠæ©Ÿèƒ½ã€ã®ã¨ãã¨ã€Œ<code>lxc-start</code> ãªã©ã® LXC ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ©ãƒ³ãƒ‰ã€ã®ã“ã¨ãŒã‚ã‚‹ã€ã¨ã„ã†ã®ã¯æ°—ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨æ€ã„ã¾ã—ãŸã€‚
ãŸã¨ãˆã° Docker 0.9 ã§ LXC ã¸ã®ä¾å­˜ãŒãªããªã£ãŸã¨ã„ã†ã®ã¯ <code>lxc-start</code> ãªã©ã‚’ä½¿ã‚ãªããªã£ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã‚’ <code>libcontainer</code> ã¨ã„ã†åˆ¥ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ç›´æ¥å‘¼ã‚“ã§ã‚«ãƒ¼ãƒãƒ«ã®ã‚³ãƒ³ãƒ†ãƒŠæ©Ÿèƒ½ã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ãŸãªã©ã€‚</p>

<h2>FreeBSD jail</h2>

<p>jail ã«ã¤ã„ã¦ã¯å­˜åœ¨ã¯çŸ¥ã£ã¦ã„ãŸã®ã§ã™ãŒã€ä½¿ã£ãŸã“ã¨ã¯ãªã‹ã£ãŸã®ã§ã€ãã†ã„ã†ã‚‚ã®ãªã®ã‹ã¨æ€ã£ã¦ã¿ã¦ã„ã¾ã—ãŸã€‚</p>

<h2>Vagrantãƒ¦ãƒ¼ã‚¶ã®ãŸã‚ã®Dockerå…¥é–€</h2>

<p>é€”ä¸­ã®è³ªå•ã«ã‚ã£ãŸ container ã¨ image ã®é•ã„ã§
<a href="http://docs.docker.io/en/latest/terms/image/">http://docs.docker.io/en/latest/terms/image/</a>
ã«æ›¸ã„ã¦ã‚ã‚‹
<code>In Docker terminology, a read-only Layer is called an image. An image never changes.</code>
ãŒæ ¹æ‹ ã ã¨æ€ã†ã®ã§ã™ãŒã€
ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã‚³ãƒ³ãƒ†ãƒŠã«åå‰ã‚’ã¤ã‘ã¦ãƒªãƒ¼ãƒ‰ã‚ªãƒ³ãƒªãƒ¼ã«ã—ãŸã‚‚ã®ã€ã¨ã„ã†èª¬æ˜ã§
ä»Šã¾ã§æ›–æ˜§ã«ã—ã¦ã„ãŸé•ã„ãŒã¡ã‚ƒã‚“ã¨ã‚ã‹ã£ãŸã‚ˆã†ã«æ€ã„ã¾ã—ãŸã€‚</p>

<p>ã“ã®ãƒ–ãƒ­ã‚°ã® Docker é–¢é€£è¨˜äº‹ã®ä¸­ã§ä¸€ç•ªäººæ°—ã®
<a href="http://blog.n-z.jp/blog/2013-12-24-docker-rm.html">Dockerã§ä¸è¦ã«ãªã£ãŸã‚³ãƒ³ãƒ†ãƒŠã‚„ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‰Šé™¤ã™ã‚‹</a>
ã§å‰²ã¨ã‚³ãƒ³ãƒ†ãƒŠã¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ›–æ˜§ãªæ„Ÿã˜ã§æ›¸ã„ã¦ã„ã‚‹ã®ã¯ã€ã¯ã£ãã‚Šã¨ã¯åŒºåˆ¥ã§ãã¦ã„ãªã‹ã£ãŸã‹ã‚‰ã§ã—ãŸã€‚</p>

<p>Vagrant ã¨ã®ä½¿ã„åˆ†ã‘ã‚‚å®Ÿéš›ã«ä¸¡æ–¹ä½¿ã£ã¦ã„ã‚‹äººã®è©±ã ã£ãŸã®ã§ã€éå¸¸ã«å‚è€ƒã«ãªã‚Šã¾ã—ãŸã€‚
åŸºæœ¬çš„ã«ã¯ Vagrant ã‚‚ Docker ã‚‚é–‹ç™ºç’°å¢ƒã¨ã—ã¦ä½¿ã†ã¨ã„ã†è©±ã§ã—ãŸã€‚</p>

<h2>Dockeré‹ç”¨ã®è¦³ç‚¹ã‹ã‚‰ã¿ãŸLXC</h2>

<p>ã„ã‚ã„ã‚ãªè©±ãŒã‚ã‚Šã¾ã—ãŸã€‚
åŸºæœ¬çš„ã«ã¯ production ç’°å¢ƒã¨ã—ã¦ä½¿ã†è©±ã§ã—ãŸã€‚</p>

<h2>Docker ã® layer æ•°åˆ¶é™ã®è©±</h2>

<p>ä¼‘æ†©æ™‚é–“ã«è©±ã‚’ã—ã¦ã„ãŸã®ã§ã™ãŒ layer ã®åˆ¶é™ãŒ 42 ã‹ã‚‰ 127 ã«å¢—ãˆãŸã®ã¯
<a href="https://github.com/dotcloud/docker/pull/2897">Increase max image depth to 127</a>
ã‹ã‚‰ã§ã€
ç†ç”±ã¯ aufs ã®æ–¹ã§ <code>CONFIG_AUFS_BRANCH_MAX_127</code> ã¨ã„ã†è¨­å®šã‚’ <code>y</code> ã«ã™ã‚‹ã¨
åˆ¶é™ãŒ 127 ã«ãªã‚‹ã‹ã‚‰ã€ã¨ã„ã†ã“ã¨ã®ã‚ˆã†ã§ã—ãŸã€‚</p>

<p>æ‡‡è¦ªä¼šã®æ™‚ã«ã‚‚è©±ãŒå‡ºãŸã®ã§ã™ãŒã€
<code>RUN</code> ã”ã¨ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒããã®ã§ã€
åŸºæœ¬çš„ã«ã¯ <code>Dockerfile</code> ã®å¤‰æ›´ã‚’è©¦ã—ã¦ã„ã‚‹é–“ã¯ <code>RUN</code> ã”ã¨ã«ç´°ã‹ãã‚³ãƒãƒ³ãƒ‰ã‚’ä¸¦ã¹ã¦è©¦è¡ŒéŒ¯èª¤ã—ã¦ã€
å‡ºæ¥ä¸ŠãŒã£ãŸã‚‰ <code>&amp;&amp;</code> ã§ã¤ãªã’ã¦ä¸€è¡Œã® <code>RUN</code> ã«ã¾ã¨ã‚ã‚‹ã®ãŒè‰¯ã•ãã†ã€
ã¨ã„ã†è©±ã§ã—ãŸã€‚</p>

<p>é–¢é€£ã™ã‚‹è©±ã¨ã—ã¦ã¯ aufs ã® layer ãŒé‡ãªã£ã¦ã„ã‚‹ã®ã‚’ git ã§ merge ã™ã‚‹ã¨ãã®ã‚ˆã†ã«ã¾ã¨ã‚ãŸã„ã€
ã¨ã„ã†æ„è¦‹ã«å¯¾ã—ã¦ã€
<code>Dockerfile</code> ã‚’ãƒã‚¹ã‚¿ãƒ¼ (ä¸») ã¨ã—ã¦æ‰±ã£ã¦ã€
ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯æ¨ã¦ã¦ã„ã¤ã§ã‚‚ä½œã‚Šç›´ã›ã‚‹ã‚‚ã® (å¾“) ã¨ã—ã¦æ‰±ã†æ–¹ãŒè‰¯ã„ã€
ã ã‹ã‚‰ã€ç„¡ç†ã« aufs ã®å·®åˆ†ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä¸­ã‚’ç›´æ¥ã„ã˜ã£ã¦ãƒãƒ¼ã‚¸ã—ã‚ˆã†ã¨ã›ãšã«
<code>Dockerfile</code> ã‹ã‚‰å†ç”Ÿæˆã—ãŸæ–¹ãŒè‰¯ã„ã€
ã¨ã„ã†è©±ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<h2>CircleCI, Cucumber-Chef</h2>

<p><code>CircleCI</code> ã¨ <code>ngrok</code> ã‚’çµ„ã¿åˆã‚ã›ã¦ã€
rebuild.fm ã§è©±ãŒã‚ã£ãŸãƒ–ãƒ©ãƒ³ãƒã”ã¨ã‚ˆã‚Šã‚‚ã•ã‚‰ã«å¯Œè±ªçš„ã«ã€
ã‚³ãƒŸãƒƒãƒˆã”ã¨ã«æ™‚é–“åˆ¶é™ä»˜ãã®ã‚µãƒ¼ãƒãƒ¼ã‚’å‹•ã‹ã™è©±ãªã©ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>

<p><code>CircleCI</code> ã®1æ™‚é–“ã¨ã„ã†æ™‚é–“åˆ¶é™ (SSH ã§å…¥ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦å‹•ã‹ã™ã¨30åˆ†) ã¨
ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–ã«å…¬é–‹ã§ãã‚‹ <code>ngrok</code> ã¨ã„ã†ã‚‚ã®ã‚’çµ„ã¿åˆã‚ã›ã¦
ã‚³ãƒŸãƒƒãƒˆã”ã¨ã«ä¸€å®šæ™‚é–“ã‚µãƒ¼ãƒãƒ¼ã‚’å‹•ã‹ã—ã¦ã„ã‚‹ã¨ã„ã†è©±ã§ã—ãŸã€‚</p>

<h2>çµ‚ã‚ã‚Š</h2>

<p>ä»–ã®ç™ºè¡¨ã®æ™‚é–“ã«ä½™è£•ã‚’æŒãŸã›ã¦ã„ã¦ã€ãƒ‘ãƒãƒ«ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CVE-2014-0160 ã§ã® Cookie æ¼æ´©]]></title>
    <link href="http://blog.n-z.jp/blog/2014-04-09-cve-2014-0160.html"/>
    <updated>2014-04-09T23:55:46+09:00</updated>
    <id>http://blog.n-z.jp/blog/cve-2014-0160</id>
    <content type="html"><![CDATA[<p>å½±éŸ¿ç¯„å›²ã®ä¸€ä¾‹ã¨ã—ã¦
<a href="https://www.mattslifebytes.com/?p=533">Hijacking user sessions with the Heartbleed vulnerability</a>
ã®å®Ÿéš›ã«ã©ã†ã„ã†ãƒ‡ãƒ¼ã‚¿ãŒæŠœãå–ã‚‰ã‚Œã¦ã—ã¾ã†ã®ã‹ã€ã¨ã„ã†ä¾‹ã§
<code>JSESSIONID</code>
ãŒè¦‹ãˆã¦ã„ã‚‹ã‚ˆã†ã« Cookie ãŒæ¼æ´©ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>

<!--more-->


<h2>è€ƒãˆã‚‰ã‚Œã‚‹æ”»æ’ƒã‚·ãƒŠãƒªã‚ª</h2>

<p><a href="http://www.exploit-db.com/exploits/32745/">OpenSSL TLS Heartbeat Extension &ndash; Memory Disclosure</a>
ã‚’è‡ªåˆ†ã®ã‚µãƒ¼ãƒãƒ¼ã«è©¦ã—ãŸæ™‚ã«
<code>mod-spdy-beta</code>
ãŒåŸå› ã§è„†å¼±æ€§ãŒæ®‹ã£ãŸã¾ã¾ã«ãªã£ã¦ã„ã¦ã€
Rails ã‚¢ãƒ—ãƒªã® Cookie ãŒè¦‹ãˆã¦ã„ã¾ã—ãŸã€‚</p>

<p>ãã“ã§è€ƒãˆãŸã®ã¯ä¸Šè¨˜ã®ãƒ–ãƒ­ã‚°ã«æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒã‚¤ã‚¸ãƒ£ãƒƒã‚¯ãŒå¯èƒ½ã ã¨ã„ã†ã“ã¨ã§ã—ãŸã€‚</p>

<p>æ‚ªã„çŠ¶æ³ã‚’è€ƒãˆã‚‹ã¨ã€
è„†å¼±æ€§ã®æƒ…å ±ãŒå…¬é–‹ã•ã‚Œã¦ã‹ã‚‰å¯¾ç­–ãŒã•ã‚Œã‚‹ã¾ã§ã®é–“ã«
å…¨ä¸–ç•Œã® Web ã‚µãƒ¼ãƒãƒ¼ã« Heartbleed ã®æ”»æ’ƒã‚’ä»•æ›ã‘ã¦ãŠã„ã¦ã€
å¾Œã§ãƒ­ã‚°ã‚’èª¿ã¹ã¦ã€ã“ã†ã„ã† Cookie ã®ã‚ˆã†ãªæƒ…å ±ãŒã‚ã‚Œã°
ãã‚Œã‚’ä½¿ã£ã¦åˆ¥é€”ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒã‚¤ã‚¸ãƒ£ãƒƒã‚¯ãªã©ã®åˆ¥ã®æ”»æ’ƒã‚’ã™ã‚‹ã€
ã¨ã„ã†å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>

<h2>Rails ã§ã®å¯¾å‡¦æ–¹æ³•æ¡ˆ</h2>

<p><code>config/initializers/secret_token.rb</code> ã® <code>secret_token</code> ã‚’å†ç”Ÿæˆã—ã¦è¨­å®šã—ç›´ã™ã¨ã„ã†æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚
ãã®éš›ã€ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒç„¡åŠ¹ã«ãªã£ãŸã‚Šã€
Remember me ã§è¦šãˆã•ã›ã¦ã„ã¦ã‚‚å¿˜ã‚Œã‚‰ã‚ŒãŸã‚Šã™ã‚‹ã¨ã„ã†ã“ã¨ãŒèµ·ãã‚‹ã®ã§ã€
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å½±éŸ¿ã‚’è€ƒãˆã¦å®Ÿæ–½ã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚</p>

<p>ã¾ãŸã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ä¿å­˜ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–ã®éµã¨ã—ã¦ã‚‚ä½¿ã£ã¦ã„ãŸã‚‰ã€
èª­ã‚ãªããªã£ã¦ã—ã¾ã†ã®ã§ã€ãã†ã„ã†ç”¨é€”ã«ã‚‚ä½¿ã£ã¦ã„ãŸã‚‰ã€
åˆ¥ã®æ–¹æ³•ã§æ—¢å­˜ã® Cookie ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã—ã‹ãªã•ãã†ã§ã™ã€‚</p>

<h2>secure å±æ€§ã‚’ä»˜ã‘ã¦ã„ã¦ã‚‚ç„¡é–¢ä¿‚</h2>

<p>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ã®é€šä¿¡å†…å®¹ã®æ®‹éª¸ãŒæ¼æ´©ã—ã¦ã—ã¾ã†ã®ã§ã€
Cookie ã« secure å±æ€§ã‚’ä»˜ã‘ã¦ã„ã¦ã‚‚é˜²ã’ã¾ã›ã‚“ã€‚</p>

<h2>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ãŒåˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã§ã‚‚ç„¡é–¢ä¿‚</h2>

<p>apache+passenger ã‚„ nginx+php-fpm ã®ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã® Web ã‚µãƒ¼ãƒãƒ¼ãŒåˆ¥ãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ã‹ã‚Œã¦ã„ã¦ã‚‚ã€
HTTPS å‘ã‘ã«æš—å·åŒ–ã™ã‚‹å‰ã®å¹³æ–‡ã®ãƒ‡ãƒ¼ã‚¿ãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã® Web ã‚µãƒ¼ãƒãƒ¼ã«æ®‹ã£ã¦ã„ã¦ã€ãã“ã®æƒ…å ±ãŒæ¼æ´©ã—ã¦ã—ã¾ã†ã®ã§ã€
Cookie ã®ã‚ˆã†ãªã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¿”ã™æƒ…å ±ã¯å½±éŸ¿ã‚’å—ã‘ã¦æ¼æ´©ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>

<p>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚µãƒ¼ãƒãƒ¼ã§ã—ã‹èª­ã¿è¾¼ã‚“ã§ã„ãªãã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ã¯æ¸¡ã—ã¦ã„ãªã„æƒ…å ±ã¯ã“ã®çµŒè·¯ã§ã¯æ¼æ´©ã—ã¾ã›ã‚“ã€‚</p>

<p>ä¾‹ãˆã°ã€å…¸å‹çš„ãª Rails ã‚¢ãƒ—ãƒªã®æ§‹æˆã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã¸æ¥ç¶šã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã¯æ¸¡ã•ãªã„ã®ã§ã€ã“ã®çµŒè·¯ã§ã¯æ¼æ´©ã—ã¾ã›ã‚“ã€‚</p>

<h2>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®ç§˜å¯†éµ</h2>

<p>æ—¢ã«æƒ…å ±åé›†ã—ã¦ã„ã‚Œã°çŸ¥ã£ã¦å¯èƒ½æ€§ãŒé«˜ã„ã¨æ€ã„ã¾ã™ãŒã€
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒèª­ã¿è¾¼ã‚“ã§ã„ã‚‹æƒ…å ±ã«ã‚ãŸã‚‹ SSL/TLS ã®ç§˜å¯†éµã¯æ¼æ´©ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>

<p>ãã¡ã‚“ã¨ã—ãŸå¯¾å‡¦ã¨ã—ã¦ã¯
<a href="http://d.hatena.ne.jp/nekoruri/20140408/heartbleed">CVE-2014-0160 OpenSSL Heartbleed è„†å¼±æ€§ã¾ã¨ã‚ &ndash; ã‚ã‚‚ãŠãã°</a>
ã«ã‚‚æ›¸ã„ã¦ã‚ã‚‹ã‚ˆã†ã«</p>

<ol>
<li><em>ç§˜å¯†éµã‹ã‚‰ä½œã‚Šç›´ã—ã¦</em> è¨¼æ˜æ›¸ã‚’å†ç™ºè¡Œ</li>
<li>éå»ã®è¨¼æ˜æ›¸ã‚’ <em>å¤±åŠ¹</em></li>
</ol>


<p>ã®ä¸¡æ–¹ãŒå¿…è¦ã§ã™ã€‚</p>

<h2>ä½™è«‡</h2>

<p>SPDY ã¨ã‹ä½¿ã„ãŸã„ã‹ã‚‰ HTTPS ã«ã—ã¦ã‚‹ã ã‘ã§ HTTP ã§é€šä¿¡ã—ã¦ã¦ã‚‚è‰¯ã„ã‚ˆã†ãªå†…å®¹ã—ã‹æ‰±ã£ã¦ãªã„ã‚µãƒ¼ãƒãƒ¼ãªã‚‰ (VirtualHost ã®ä»–ã®ãƒ›ã‚¹ãƒˆã‚‚å«ã‚ã¦ã¨ã„ã†æ¡ä»¶ä»˜ãã§)ã€æ”¾ç½®ã§ã‚‚è‰¯ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€å°‘ãªãã¨ã‚‚æ¬¡ã®è¨¼æ˜æ›¸ã®æ›´æ–°ã®æ™‚ã«ã¯ç§˜å¯†éµã‚’ä½œã‚Šç›´ã—ãŸæ–¹ãŒè‰¯ã„ã‚ˆã†ã«æ€ã„ã¾ã™ã€‚</p>

<h2>ã¾ã¨ã‚</h2>

<p>å¤–éƒ¨ã‹ã‚‰ SSL/TLS æ¥ç¶šã‚’å—ã‘ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãŒæŒã£ã¦ã„ã‚‹æƒ…å ±ãŒæ¼æ´©ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€ã¨ã„ã†ã“ã¨ã§ã€å…·ä½“ä¾‹ã¨ã—ã¦ Cookie ã«ã¤ã„ã¦å°‘ã—è©³ã—ãè€ƒãˆã¦ã¿ã¾ã—ãŸã€‚</p>

<p>ç°¡å˜ã«è¨€ãˆã°ã€è„†å¼±æ€§ã®ã‚ã‚‹çŠ¶æ…‹ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨é€šä¿¡ã—ã¦ã„ã‚‹å†…å®¹ã¯ã™ã¹ã¦æ¼æ´©ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€ã¤ã¾ã‚Š HTTPS ã§é€šä¿¡ã—ã¦ã„ã¦ã‚‚ HTTP ã¨åŒã˜ã‚ˆã†ãªæ©Ÿå¯†æ€§ã—ã‹ãªã‹ã£ãŸå¯èƒ½æ€§ãŒã‚ã‚‹ã€ã¨è€ƒãˆã‚‹ã®ãŒè‰¯ã•ãã†ã§ã™ã€‚</p>

<p>ã¤ã¾ã‚Šã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰é€ã£ãŸæƒ…å ±ã‚‚æ¼æ´©ã®å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€
Heartbleed è„†å¼±æ€§ãŒæ®‹ã£ã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã«ã¯ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ãªã©ã®æƒ…å ±ã¯
é€ã‚‰ãªã„æ–¹ãŒè‰¯ã„ã€ã¨ã„ã†ã“ã¨ã«ãªã‚Šã¾ã™ã€‚</p>

<p>é–¢é€£ã™ã‚‹è©±ãªã®ã§ä¸€ç·’ã«æ›¸ã„ã¦ã—ã¾ã£ãŸã®ã§ã€ã¡ã‚‡ã£ã¨ç´›ã‚‰ã‚ã—ã„ã§ã™ãŒã€
ã‚µãƒ¼ãƒãƒ¼ã®ç§˜å¯†éµã®æ¼æ´©ã®å¯èƒ½æ€§ã‚‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®ç®¡ç†è€…ã¯åˆ¥é€”å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
]]></content>
  </entry>
  
</feed>
