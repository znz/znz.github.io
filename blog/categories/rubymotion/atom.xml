<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: rubymotion | @znz blog]]></title>
  <link href="http://blog.n-z.jp/blog/categories/rubymotion/atom.xml" rel="self"/>
  <link href="http://blog.n-z.jp/"/>
  <updated>2013-12-14T01:29:25+09:00</updated>
  <id>http://blog.n-z.jp/</id>
  <author>
    <name><![CDATA[Kazuhiro NISHIYAMA]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[第 5 回 RubyMotion もくもく会 in Osaka に参加した]]></title>
    <link href="http://blog.n-z.jp/blog/2013-11-20-rubymotion-mokumoku-osaka.html"/>
    <updated>2013-11-20T21:54:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/rubymotion-mokumoku-osaka</id>
    <content type="html"><![CDATA[<p>第 1 回から第 4 回にも参加した RubyMotion もくもく会 in Osaka の
<a href="http://connpass.com/event/3871/">第 5 回 RubyMotion もくもく会 in Osaka</a>
に参加してきました。</p>

<p>今回も東京と同時開催でしたが、
接続などはせずに終わってしまいました。</p>

<p>次回の
<a href="http://connpass.com/event/4211/">第 6 回 RubyMotion もくもく会 in Osaka</a>
は 12/26(木) になりました。</p>

<!--more-->


<h2>話に出たもの</h2>

<p>話に出てきたサイトなどのメモです。</p>

<ul>
<li><a href="http://shin1x1.github.io/VagrantX/">http://shin1x1.github.io/VagrantX/</a>
のサイトのデザインを
<a href="https://wrapbootstrap.com/">https://wrapbootstrap.com/</a>
から選ぼうとしたが、結局 github のテンプレートのまま使うことにしたという話</li>
<li>昔は nib というバイナリだったけど今は xib という XML ファイルになっているという話</li>
<li><a href="http://www.rainymood.com/">Rainy Mood</a>
と
<a href="http://tadaya.net/blog/2012/12/01">多田屋のBGM</a>
の組み合わせが良いという話</li>
<li>アドベントカレンダーの話

<ul>
<li><a href="http://www.adventar.org/">Adventar</a></li>
<li><a href="http://qiita.com/advent-calendar/2013/rubymotion">RubyMotion Advent Calendar 2013</a></li>
</ul>
</li>
<li><a href="http://www.img2icnsapp.com/">Img2icns</a> の無料の方で OSX アプリのアイコンへの変換が出来そうという話</li>
<li>クラウドソーシングでアイコンを募集するのはどうかという話

<ul>
<li><a href="http://www.designclue.co/">designclue（デザインクルー） &ndash; デザインクラウドソーシング</a></li>
</ul>
</li>
</ul>


<h2>やっていたこと</h2>

<h3>www.ruby-lang.org</h3>

<p><a href="https://www.ruby-lang.org/ja/news/2013/09/28/design-contest/">www.ruby-lang.org のサイトデザイン募集</a>
の投票を webmaster でやっていて、締め切りが今日だったということで、
投票しようかと思っていたら、
締め切りが 9:00 20 Nov(JST) だったのに気付いて諦めました。
まだ集計前だったようなので、間に合いそうでしたが、
無理はしないということにしました。</p>

<p>ちなみに
<a href="https://github.com/ruby/www.ruby-lang.org/issues?labels=contest">応募は7件</a>
でした。</p>

<h3>notification</h3>

<p>最初は
<a href="https://github.com/Watson1978/notification">https://github.com/Watson1978/notification</a>
という OSX のサンプルをいじってみていました。</p>

<p><code>open ./build/MacOSX-10.8-Development/notification.app</code>
で開くと右上の通知はそもそも出てきているのかどうかわからない状態で終了してしまって、
通知センターを開くとちゃんと送れていることが確認できたり、
引数は <code>-psn_なんとか</code> という
Emacs.app のカレントディレクトリ問題を調べていた時に見かけたものが渡ってきていたりしたのがわかりました。</p>

<h3>Calc</h3>

<p><a href="https://github.com/HipByte/RubyMotionSamples">RubyMotionSamples</a>
の osx に Calc というのが追加されていたので、
それを試していました。</p>

<h2>デフォルトブラウザ設定</h2>

<p>デフォルトブラウザはどこで設定しているんだろうと思って、
<code>defaults read</code>
の出力を調べたりしていたら、
<code>LSSetDefaultHandlerForURLScheme</code>
と
<code>LSSetDefaultRoleHandlerForContentType</code>
で設定できるとわかったので、
RubyMotion の中から呼び出そうとしたのですが、
<code>NoMethodError</code>
になるだけで、
結局呼び出し方がわかりませんでした。</p>

<p>試したこととしては <code>Calc</code> のボタンと同じように
ボタンが押された時に呼ばれるメソッドの中で、</p>

<p>```ruby</p>

<pre><code>bundle_id = NSBundle.mainBundle.bundleIdentifier
LSSetDefaultHandlerForURLScheme("http", bundle_id) #~&gt; NoMethodError
</code></pre>

<p>```</p>

<p>のように呼び出そうとしたところ、
<code>LSSetDefaultHandlerForURLScheme</code>
で
<code>NoMethodError</code>
になりました。</p>

<p>それから <code>Rakefile</code> の
<code>Motion::Project::App.setup do |app|</code>
のブロックで
<code>app.frameworks &lt;&lt; 'ApplicationServices'</code>
のように
<code>ApplicationServices</code>
フレームワークを追加というのも試してみたのですが、
変化はありませんでした。</p>

<p>そんな感じで手詰まっていたら時間が来て終了ということになりました。</p>

<p>確認したバージョンは以下の通りです。</p>

<ul>
<li>Mac OS X 10.8.5</li>
<li>Xcode 5.0.2</li>
<li>RubyMotion 2.14</li>
</ul>


<h3>解決</h3>

<p><code>CoreServices</code> が必要と教えてもらったので、
<code>app.frameworks &lt;&lt; 'CoreServices'</code>
も足してみたのですが、
<code>NoMethodError</code>
のままで動かず、
結局
RubyMotion を 2.15 に上げると直っていました。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第 4 回 RubyMotion もくもく会 in Osaka に参加した]]></title>
    <link href="http://blog.n-z.jp/blog/2013-10-23-rubymotion-mokumoku-osaka.html"/>
    <updated>2013-10-23T19:30:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/rubymotion-mokumoku-osaka</id>
    <content type="html"><![CDATA[<p>第 1 回から第 3 回にも参加した RubyMotion もくもく会 in Osaka の
<a href="http://connpass.com/event/3557/">第 4 回 RubyMotion もくもく会 in Osaka</a>
に参加してきました。</p>

<p>今回も前回と同じく東京と同時開催でした。
前回はハングアウトで接続していたのですが、
今回は接続せずに終わってしまいました。</p>

<!--more-->


<h2>話に出たもの</h2>

<p>話に出てきたアプリやサイトのメモです。</p>

<ul>
<li><a href="http://www.airsquirrels.com/reflectorc/">Reflector &ndash; AirPlay mirror your iPhone or iPad to any Mac or PC</a>

<ul>
<li>Mac OS X が Apple TV の代わりに iOS の画面を受け取れるようになる (有償 $12.99)。</li>
<li>最後の成果発表の時に、複数の画面を同時に受け取れるという発見がありました。</li>
<li>それを使えば複数の画面をまとめて同時に Apple TV に出せました。</li>
<li>同じ会社が作っている
<a href="http://www.airsquirrels.com/airparrot/">AirParrot &ndash; AirPlay your Mac or PC&rsquo;s screen to Apple TV</a>
を使えば Windows PC からでも Apple TV に画面を飛ばせるという話もありました。</li>
</ul>
</li>
<li><a href="https://popapp.in/">POP &ndash; Prototyping on Paper | iPhone App Prototyping Made Easy</a>
ペーパープロトタイピングで UI の設計 (無償)</li>
<li><a href="https://www.flinto.com/">Flinto – iPhone and iPad Prototyping</a>
こちらもペーパープロトタイピングでブラウザ上でも見えます (有償)。
画像のアップロードが面倒なので POP の方を使っているという話でした。</li>
<li><a href="http://asciiwwdc.com/">ASCIIwwdc</a>
WWDC をテキストにおこしたサイト</li>
<li><a href="http://estimote.com/">Estimote Beacons — real world context for your apps</a>
iBeacon 関連のハードウェア</li>
<li><a href="http://www.rainymood.com/">Rainy Mood</a>
落ち着く BGM</li>
<li><a href="http://connpass.com/event/3871/">第 5 回 RubyMotion もくもく会 in Osaka &ndash; connpass</a>
次回は 2013/11/20(水) 19:30 〜 21:30
(ハッシュタグが設定されていない?)</li>
<li><a href="http://connpass.com/event/3870/">第15回 RubyMotion もくもく会 in Tokyo &ndash; connpass</a>
東京の次回
(ハッシュタグが設定されているから参加しますツイートにハッシュタグがついている?)</li>
<li><a href="http://www.bohemiancoding.com/sketch/">Sketch | The designer’s toolbox</a>
iOS アプリでアイコンとか作るのに使っているという話</li>
<li><a href="http://peatix.com/">Peatix | 簡単イベント管理、チケット販売サイト（ピーティックス） | Peatix</a>
手数料が安いという話</li>
</ul>


<h2>やっていたこと</h2>

<p>前回の続きで
<a href="https://github.com/HipByte/RubyMotionSamples">https://github.com/HipByte/RubyMotionSamples</a>
のサンプルを試していたのですが、
<a href="https://github.com/HipByte/RubyMotionSamples/tree/master/osx/Tweets">https://github.com/HipByte/RubyMotionSamples/tree/master/osx/Tweets</a>
が Twitter API 1.1 への変更の影響で動かなくなっていました。</p>

<p>具体的には</p>

<p>```ruby</p>

<pre><code>    begin
      json = JSONParser.parse_from_url(url)
    rescue RuntimeError =&gt; e
      presentError e.message
    end
</code></pre>

<p>```</p>

<p>という部分で</p>

<p><code>``
Terminating app due to uncaught exception 'TypeError', reason: 'data_parser.rb:6:in</code>parse:&lsquo;: exception class/object expected (TypeError)</p>

<pre><code>from json_parser.rb:3:in `parse_from_url:'
from app_delegate.rb:71:in `block in search:'
</code></pre>

<p>```</p>

<p>というエラーになっていました。</p>

<p>ブラウザで
<code>http://search.twitter.com/search.json?q=xcode%20crash</code>
にアクセスしてみると
<code>{"errors": [{"message": "The Twitter REST API v1 is no longer active. Please migrate to API v1.1. https://dev.twitter.com/docs/api/1.1/overview.", "code": 68}]}</code>
というエラーが
<code>HTTP/1.1 410 Gone</code>
で返ってきていました。</p>

<p>API 1.1 に対応するには OAuth 対応が必須ということで、
簡単には対処できなさそうでしたが、
<a href="https://github.com/HipByte/RubyMotionSamples/issues/31">https://github.com/HipByte/RubyMotionSamples/issues/31</a>
に報告がすでにあったのでコメントをつけておきました。</p>

<p>それとは別に、エラー処理も <code>RuntimeError</code> しか <code>rescue</code> していないので、
<code>TypeError</code> は <code>rescue</code> できていなかったり、
<code>rescue</code> できても</p>

<p><code>
Terminating app due to uncaught exception 'NoMethodError', reason: 'app_delegate.rb:73:in `block in search:': undefined method `presentError' for #&lt;AppDelegate:0x7fe1eb107910 ...&gt; (NoMethodError)
</code></p>

<p>でエラー処理がちゃんと動いていなかったりしました。</p>

<p>これは <code>NSApplication.sharedApplication.presentError error_ptr</code> にすれば良いのかも、
と思って試してみたけどうまくいかない、というところで時間が来て終了になりました。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[第 3 回 RubyMotion もくもく会 in Osaka に参加した]]></title>
    <link href="http://blog.n-z.jp/blog/2013-09-25-rubymotion-mokumoku-osaka.html"/>
    <updated>2013-09-25T20:43:00+09:00</updated>
    <id>http://blog.n-z.jp/blog/rubymotion-mokumoku-osaka</id>
    <content type="html"><![CDATA[<p>第 1 回と第 2 回にも参加した RubyMotion もくもく会 in Osaka の
<a href="http://connpass.com/event/3450/">第 3 回 RubyMotion もくもく会 in Osaka</a>
に参加してきました。</p>

<!--more-->


<p>OS X アプリの勉強をしようと思って、
とりあえず
<code>motion create --template=osx Hello</code>
で生成されたファイルを読んでいたら、
<code>app/menu.rb</code>
の
<code>Italic</code>
の
<code>keyEquivalent:</code>
が
<code>Bold</code>
と同じ
<code>'b'</code>
になっていたのを見つけて、
他もテキストエディットと見比べていたら
違う部分を見つけたので、
<code>motion support</code>
で報告してみました。</p>

<p>```diff
diff &mdash;git a/app/menu.rb b/app/menu.rb
index 58b48f8..0da85e1 100644
&mdash;&ndash; a/app/menu.rb
+++ b/app/menu.rb
@@ -47,7 +47,7 @@ class AppDelegate</p>

<pre><code> fontMenu = createMenu('Font') do
   addItemWithTitle('Show Fonts', action: 'orderFrontFontPanel:', keyEquivalent: 't')
   addItemWithTitle('Bold', action: 'addFontTrait:', keyEquivalent: 'b')
</code></pre>

<ul>
<li>   addItemWithTitle(&lsquo;Italic&rsquo;, action: &lsquo;addFontTrait:&rsquo;, keyEquivalent: &lsquo;b&rsquo;)</li>
<li>   addItemWithTitle(&lsquo;Italic&rsquo;, action: &lsquo;addFontTrait:&rsquo;, keyEquivalent: &lsquo;i&rsquo;)
   addItemWithTitle(&lsquo;Underline&rsquo;, action: &lsquo;underline:&rsquo;, keyEquivalent: &lsquo;u&rsquo;)
   addItem(NSMenuItem.separatorItem)
   addItemWithTitle(&lsquo;Bigger&rsquo;, action: &lsquo;modifyFont:&rsquo;, keyEquivalent: &lsquo;+&rsquo;)
@@ -60,9 +60,11 @@ class AppDelegate
   addItemWithTitle(&lsquo;Justify&rsquo;, action: &lsquo;alignJustified:&rsquo;, keyEquivalent: &lsquo;&rsquo;)
   addItemWithTitle(&lsquo;Align Right&rsquo;, action: &lsquo;alignRight:&rsquo;, keyEquivalent: &lsquo;}&rsquo;)
   addItem(NSMenuItem.separatorItem)</li>
<li>   addItemWithTitle(&lsquo;Show Ruler&rsquo;, action: &lsquo;toggleRuler:&rsquo;, keyEquivalent: &lsquo;&rsquo;)</li>
<li>   addItemWithTitle(&lsquo;Copy Ruler&rsquo;, action: &lsquo;copyRuler:&rsquo;, keyEquivalent: &lsquo;c&rsquo;)</li>
<li>   addItemWithTitle(&lsquo;Paste Ruler&rsquo;, action: &lsquo;pasteRuler:&rsquo;, keyEquivalent: &lsquo;v&rsquo;)</li>
<li>   addItemWithTitle(&lsquo;Show Ruler&rsquo;, action: &lsquo;toggleRuler:&rsquo;, keyEquivalent: &lsquo;r&rsquo;)</li>
<li>   item = addItemWithTitle(&lsquo;Copy Ruler&rsquo;, action: &lsquo;copyRuler:&rsquo;, keyEquivalent: &lsquo;c&rsquo;)</li>
<li>   item.keyEquivalentModifierMask = NSCommandKeyMask|NSControlKeyMask</li>
<li>   item = addItemWithTitle(&lsquo;Paste Ruler&rsquo;, action: &lsquo;pasteRuler:&rsquo;, keyEquivalent: &lsquo;v&rsquo;)</li>
<li><p>   item.keyEquivalentModifierMask = NSCommandKeyMask|NSControlKeyMask
 end</p>

<p> addMenu(&lsquo;Format&rsquo;) do
```</p></li>
</ul>


<p>他にはサンプルとして
<a href="https://github.com/satococoa/rubymotion-osx-browser">https://github.com/satococoa/rubymotion-osx-browser</a>
とか
<a href="https://github.com/HipByte/RubyMotionSamples">https://github.com/HipByte/RubyMotionSamples</a>
とかをちょっと動かして見たりしていました。</p>

<p>他の人の話としては、
<code>UICreateCGImageFromIOSurface</code>
というシンボルで問題が起きて、
最初は
<a href="https://github.com/ZBar/ZBar">ZBar</a>
というライブラリが疑われていたけど違ったとかいう話とか、
<a href="http://support.revealapp.com/discussions/suggestions/8-reference-to-uicreatecgimagefromiosurface-should-be-removed-for-release-scheme">Reveal.framework が原因で Release ビルドで外せば良い</a>
という話とか、
東京と Google ハングアウトでつないでみてたとか、
<a href="http://mobiletou.ch/2013/09/002-create-application">(&frac12;) &ndash; 第二回 RubyMotion でアプリケーションを作ろう (1) &ndash; 実践！RubyMotion &ndash; Mobile Touch &ndash; モバイル/タブレット開発者およびデザイナー向け情報ポータル</a>
で開発中のアプリをみせてもらったりとかがありました。</p>

<p>東京とのハングアウトが終わった後は
<a href="https://gihyo.jp/dp/ebook/2013/978-4-7741-6024-5">Vagrant入門ガイド</a>
の話とか、
<a href="http://jfk2013.jaws-ug.jp/">JAWS FESTA Kansai 2013</a>
の話とかもしていました。</p>

<p>最後に次回も東京と日程を合わせるということで
<a href="http://connpass.com/event/3557/">第 4 回 RubyMotion もくもく会 in Osaka</a>
は 10/23 (水) 19:30 からということになりました。</p>
]]></content>
  </entry>
  
</feed>
